import{a as Be,b as He,c as We,d as $e}from"./chunk-O6L55GCC.js";import{c as Fe,d as J,e as De,f as Y,g as Le,h as Ne,i as Q,o as je}from"./chunk-DAG7ROTK.js";import{a as K}from"./chunk-QV7E4BQJ.js";import{$ as _,Bb as Me,Cb as Te,Ea as xe,Fa as ce,Ga as Ce,Ha as y,Ia as T,J as he,Ja as A,K as l,Ka as de,Kb as Ve,Lb as ke,M as P,Mb as Re,N as H,O as W,Qa as be,Qb as D,Ra as $,S as g,Sa as U,Ua as Ee,Va as Se,Xa as Ie,Y as d,Ya as ye,Z as i,_ as t,aa as ve,ba as ge,ca as S,cb as Pe,da as x,ea as p,f as pe,fb as we,i as fe,ma as se,n as ue,nb as X,oa as w,qb as me,ra as n,rb as q,sa as C,t as _e,ta as b,tb as Ae,u as j,ua as V,w as B,wa as G,wb as Oe,xa as z,xb as Ge,y as h,ya as M,z as v,zb as ze}from"./chunk-6TW3IKKZ.js";import{a as re,b as le}from"./chunk-GAL4ENT6.js";var it=(o,a)=>({"d-none d-md-block":o,"sidebar-collapsed":a}),at=o=>({"text-danger fw-bold bg-warning":o}),nt=(o,a)=>({"badge bg-success":o,"badge bg-warning text-dark":a}),ot=(o,a,e)=>({"badge bg-success":o,"badge bg-warning text-dark":a,"badge bg-danger":e});function rt(o,a){o&1&&(i(0,"span",64),n(1,"P\xE1gina principal"),t())}function lt(o,a){o&1&&(i(0,"span",64),n(1,"Cuenta"),t())}function st(o,a){o&1&&(i(0,"span",64),n(1,"Demucas"),t())}function ct(o,a){if(o&1){let e=S();i(0,"li")(1,"button",65),x("click",function(){h(e);let s=p();return v(s.setTab("estadisticas"))}),_(2,"i",66),g(3,st,2,0,"span",12),t()()}if(o&2){let e=p();l(3),d("ngIf",e.menuOpen)}}function dt(o,a){o&1&&(i(0,"span",64),n(1,"Pagos"),t())}function mt(o,a){if(o&1){let e=S();i(0,"li")(1,"button",65),x("click",function(){h(e);let s=p();return v(s.setTab("EstadoPagos"))}),_(2,"i",67),g(3,dt,2,0,"span",12),t()()}if(o&2){let e=p();l(3),d("ngIf",e.menuOpen)}}function pt(o,a){if(o&1){let e=S();i(0,"div",75)(1,"div",76)(2,"div",77)(3,"div",78),_(4,"i",84),i(5,"h5",80),n(6,"Ver Hoja de Vida"),t()(),i(7,"p",81),n(8,'Modifique la informaci\xF3n de su "HOJA DE VIDA".'),t(),i(9,"button",82),x("click",function(){h(e);let s=p(2);return v(s.setTab("cuenta"))}),n(10,"Modificar"),t()()()()}}function ft(o,a){if(o&1){let e=S();i(0,"div",75)(1,"div",76)(2,"div",77)(3,"div",78),_(4,"i",85),i(5,"h5",80),n(6,"Reporte General Pagos"),t()(),i(7,"p",81),n(8,'Podr\xE1 visualizar el reporte general de pagos del solamente los clientes "ACTIVOS".'),t(),i(9,"button",86),x("click",function(){h(e);let s=p(2);return v(s.cargarinformacionpagosactivos())}),n(10,"VER INFORMACION"),t()()()()}}function ut(o,a){if(o&1){let e=S();i(0,"div",75)(1,"div",76)(2,"div",77)(3,"div",78),_(4,"i",87),i(5,"h5",80),n(6,"Verificar Pagos"),t()(),i(7,"p",81),n(8,"Verificar los estados de tus Sesiones y Pagos"),t(),i(9,"button",88),x("click",function(){h(e);let s=p(2);return v(s.setTab("EstadoPagos"))}),n(10,"Verificar"),t()()()()}}function _t(o,a){if(o&1){let e=S();i(0,"div",75)(1,"div",76)(2,"div",77)(3,"div",78),_(4,"i",89),i(5,"h5",80),n(6,"Verificar progreso"),t()(),i(7,"p",81),n(8,"Consulta tu progreso y logros."),t(),i(9,"button",90),x("click",function(){h(e);let s=p(2);return v(s.setTab("estadisticas"))}),n(10,"Ver progreso"),t()()()()}}function ht(o,a){if(o&1){let e=S();i(0,"div",68)(1,"div",69)(2,"div",70)(3,"div",71)(4,"div",72)(5,"h2"),n(6),t(),i(7,"p",73),n(8,"Aqu\xED puedes gestionar todas tus configuraciones, ver tu actividad reciente y actualizar tu informaci\xF3n personal."),t(),i(9,"div",74)(10,"div",75)(11,"div",76)(12,"div",77)(13,"div",78),_(14,"i",79),i(15,"h5",80),n(16,"Cambiar contrase\xF1a"),t()(),i(17,"p",81),n(18,"Actualiza tu contrase\xF1a para mantener tu cuenta segura."),t(),i(19,"button",82),x("click",function(){h(e);let s=p();return v(s.setTab("cuenta"))}),n(20,"Cambiar"),t()()()(),g(21,pt,11,0,"div",83)(22,ft,11,0,"div",83)(23,ut,11,0,"div",83)(24,_t,11,0,"div",83),t()()()()()()}if(o&2){let e=p();l(6),b("BIENVENIDO ",e.datasesion.usuario.nombres+" "+e.datasesion.usuario.apellidos),l(15),d("ngIf",e.datasesion.abilities&&!e.datasesion.abilities.includes("CLIENTELA")),l(),d("ngIf",e.datasesion.abilities&&!e.datasesion.abilities.includes("CLIENTELA")),l(),d("ngIf",e.datasesion.abilities&&e.datasesion.abilities.includes("CLIENTELA")),l(),d("ngIf",e.datasesion.abilities&&e.datasesion.abilities.includes("CLIENTELA"))}}function vt(o,a){if(o&1&&(i(0,"tr")(1,"th"),n(2,"Edad en el momento de registro"),t(),i(3,"td"),n(4),t()()),o&2){let e=p(2);l(4),C(e.datasesion.usuario.edad)}}function gt(o,a){if(o&1&&(i(0,"tr")(1,"th"),n(2,"Fecha de nacimiento"),t(),i(3,"td"),n(4),y(5,"dateFormat"),t()()),o&2){let e=p(2);l(4),C(T(5,1,e.datasesion.usuario.fechnac))}}function xt(o,a){if(o&1&&(i(0,"tr")(1,"th"),n(2,"Funciones"),t(),i(3,"td"),n(4),t()()),o&2){let e=p(2);l(4),C(e.datasesion.usuario.funciones&&e.datasesion.usuario.funciones.trim()||"SIN DESIGNAR")}}function Ct(o,a){o&1&&(i(0,"button",106),_(1,"i",107),n(2," Modificar Hoja de Vida "),t())}function bt(o,a){if(o&1){let e=S();i(0,"div",108)(1,"div",109)(2,"h5",110),n(3,"Hoja de Vida"),t(),i(4,"small",97),n(5,"Vista previa"),t()(),i(6,"div",72)(7,"quill-editor",47),M("ngModelChange",function(s){h(e);let c=p(2);return z(c.datasesion.usuario.hojadevida,s)||(c.datasesion.usuario.hojadevida=s),v(s)}),t(),i(8,"small",111),n(9,' Utiliza el bot\xF3n "Modificar Hoja de Vida" para editar esta informaci\xF3n. '),t()()()}if(o&2){let e=p(2);l(7),d("modules",e._tools.modulesQuillShow),G("ngModel",e.datasesion.usuario.hojadevida)}}function Et(o,a){if(o&1&&(i(0,"div",68)(1,"div",71)(2,"div",72)(3,"h3"),n(4,"Cuenta"),t(),i(5,"p"),n(6,"Informaci\xF3n de la cuenta y opciones de seguridad."),t(),i(7,"div",69)(8,"div",91),_(9,"img",92),i(10,"h4"),n(11),t(),i(12,"span",93),n(13),t()(),i(14,"div",94)(15,"table",95)(16,"tbody")(17,"tr")(18,"th"),n(19,"Usuario"),t(),i(20,"td"),n(21),t()(),g(22,vt,5,1,"tr",15)(23,gt,6,3,"tr",15),i(24,"tr")(25,"th"),n(26,"Carnet"),t(),i(27,"td"),n(28),t()(),i(29,"tr")(30,"th"),n(31,"Celular"),t(),i(32,"td"),n(33),t()(),g(34,xt,5,1,"tr",15),i(35,"tr")(36,"th"),n(37,"Informaci\xF3n registrada el"),t(),i(38,"td")(39,"div",96)(40,"span"),n(41),y(42,"date"),t(),i(43,"small",97),n(44,"Creado"),t()()()(),i(45,"tr")(46,"th"),n(47,"\xDAltima actualizaci\xF3n de Informaci\xF3n"),t(),i(48,"td")(49,"div",96)(50,"span"),n(51),y(52,"date"),t(),i(53,"small",97),n(54,"\xDAltima modificaci\xF3n"),t()()()()()(),i(55,"div",98)(56,"div",99)(57,"span",93),n(58),t(),i(59,"small",97),n(60),y(61,"date"),t()(),i(62,"div",100)(63,"button",101),_(64,"i",102),n(65," Cambiar contrase\xF1a "),t(),g(66,Ct,3,0,"button",103),t()()()(),_(67,"hr",104),g(68,bt,10,2,"div",105),t()()()),o&2){let e=p();l(9),d("src",e.datasesion.usuario.foto==null?e.ruta+"fijos/sinperfil.jpg":e.datasesion.usuario.foto,he),l(2),V("",e.datasesion.usuario.nombres," ",e.datasesion.usuario.apellidos),l(2),C(e.datasesion.usuario.estado),l(8),C(e.datasesion.usuario.usuario),l(),d("ngIf",e.datasesion.abilities&&e.datasesion.abilities.includes("CLIENTELA")),l(),d("ngIf",e.datasesion.abilities&&e.datasesion.abilities.includes("CLIENTELA")),l(5),C(e.datasesion.usuario.carnet),l(5),C(e.datasesion.usuario.celular),l(),d("ngIf",e.datasesion.abilities&&!e.datasesion.abilities.includes("CLIENTELA")),l(7),C(A(42,16,e.datasesion.usuario.created_at,"longDate")),l(10),C(A(52,19,e.datasesion.usuario.updated_at,"longDate")),l(7),C(e.datasesion.usuario.estado),l(2),b("Cuenta activa desde ",A(61,22,e.datasesion.usuario.created_at,"shortDate")),l(6),d("ngIf",e.datasesion.abilities&&!e.datasesion.abilities.includes("CLIENTELA")),l(2),d("ngIf",e.datasesion.abilities&&!e.datasesion.abilities.includes("CLIENTELA"))}}function St(o,a){if(o&1&&(i(0,"p")(1,"strong"),n(2,"Tutor:"),t(),n(3),t()),o&2){let e=p().$implicit;l(3),b(" ",e.tutor)}}function It(o,a){if(o&1&&(i(0,"p")(1,"strong"),n(2,"Residencia actual:"),t(),n(3),t()),o&2){let e=p().$implicit;l(3),b(" ",e.residenciaactual)}}function yt(o,a){if(o&1&&(i(0,"p")(1,"strong"),n(2,"Objetivos generales:"),t(),n(3),t()),o&2){let e=p().$implicit;l(3),b(" ",e.objgenerales)}}function Pt(o,a){if(o&1&&(i(0,"p")(1,"strong"),n(2,"F\xEDsico:"),t(),n(3),t()),o&2){let e=p().$implicit;l(3),b(" ",e.fisico)}}function wt(o,a){if(o&1&&(i(0,"p")(1,"strong"),n(2,"Emocional:"),t(),n(3),t()),o&2){let e=p().$implicit;l(3),b(" ",e.emocional)}}function At(o,a){if(o&1&&(i(0,"p")(1,"strong"),n(2,"Cognitivo:"),t(),n(3),t()),o&2){let e=p().$implicit;l(3),b(" ",e.cognitivo)}}function Ot(o,a){if(o&1&&(i(0,"p")(1,"strong"),n(2,"Social:"),t(),n(3),t()),o&2){let e=p().$implicit;l(3),b(" ",e.social)}}function Gt(o,a){if(o&1&&(i(0,"p")(1,"strong"),n(2,"M\xE9todos a usar:"),t(),n(3),t()),o&2){let e=p().$implicit;l(3),b(" ",e.metodosausar)}}function zt(o,a){if(o&1){let e=S();ve(0),i(1,"div",114)(2,"div",115)(3,"div",72)(4,"div",116)(5,"h3",80),n(6),y(7,"dateFormat"),t(),i(8,"button",117),x("mousedown",function(s){let c=h(e).$implicit,m=p(2);return v(m.CargarGraficas(c.id,c.fechaadmision,s))}),_(9,"i",118),t()(),i(10,"h5",119),n(11),t(),i(12,"p")(13,"strong"),n(14,"Tipo de Tratamiento:"),t(),n(15),t(),i(16,"p")(17,"strong"),n(18,"Duraci\xF3n:"),t(),n(19),t(),i(20,"p")(21,"strong"),n(22,"Fecha de admisi\xF3n:"),t(),n(23),y(24,"date"),t(),i(25,"p")(26,"strong"),n(27,"Frecuencia:"),t(),n(28),t(),g(29,St,4,1,"p",15)(30,It,4,1,"p",15)(31,yt,4,1,"p",15)(32,Pt,4,1,"p",15)(33,wt,4,1,"p",15)(34,At,4,1,"p",15)(35,Ot,4,1,"p",15)(36,Gt,4,1,"p",15),_(37,"hr"),i(38,"small",97),n(39),y(40,"date"),y(41,"date"),t()()()(),ge()}if(o&2){let e=a.$implicit;l(6),b("Fecha de admisi\xF3n: ",T(7,16,e.fechaadmision)),l(5),b("Diagn\xF3stico: ",e.diagnostico),l(4),b(" ",e.tipotratamiento),l(4),b(" ",e.duracion," minutos"),l(4),b(" ",A(24,18,e.fechaadmision,"longDate")),l(5),b(" ",e.frecuencia),l(),d("ngIf",e.tutor),l(),d("ngIf",e.residenciaactual),l(),d("ngIf",e.objgenerales),l(),d("ngIf",e.fisico),l(),d("ngIf",e.emocional),l(),d("ngIf",e.cognitivo),l(),d("ngIf",e.social),l(),d("ngIf",e.metodosausar),l(3),V("Creado: ",A(40,21,e.created_at,"longDate")," | Actualizado: ",A(41,24,e.updated_at,"longDate"))}}function Mt(o,a){if(o&1&&(i(0,"div",68)(1,"div",71)(2,"div",72)(3,"h3"),n(4,"INFORMACI\xD3N DEMUCAS Y AVANCES"),t(),i(5,"p"),n(6,"Visualiza tus estad\xEDsticas de DEMUCAS aqu\xED."),t(),i(7,"div",112),g(8,zt,42,27,"ng-container",113),t()()()()),o&2){let e=p();l(8),d("ngForOf",e.InfoClientes)}}function Tt(o,a){o&1&&(i(0,"span",135),n(1,"Activo"),t())}function Vt(o,a){if(o&1&&(i(0,"span",136),n(1),t()),o&2){let e=p().$implicit;l(),C(e.estado)}}function kt(o,a){if(o&1){let e=S();i(0,"span")(1,"button",143),x("click",function(){h(e);let s=p().$implicit,c=p(4);return v(c.apunteSeleccionado=s.apuntes)}),n(2," Ver apunte "),t()()}}function Rt(o,a){o&1&&(i(0,"span",97),n(1,"Sin apuntes"),t())}function Ft(o,a){if(o&1&&(i(0,"span"),n(1),y(2,"dateFormat"),t()),o&2){let e=p().$implicit;l(),C(T(2,1,e.fecha))}}function Dt(o,a){o&1&&(i(0,"span",97),n(1,"Sin fecha"),t())}function Lt(o,a){if(o&1&&(i(0,"tr")(1,"td"),n(2),t(),i(3,"td",141),g(4,kt,3,0,"span",142)(5,Rt,2,0,"ng-template",null,1,de),t(),i(7,"td")(8,"span",131),n(9),t()(),i(10,"td"),g(11,Ft,3,3,"span",142)(12,Dt,2,0,"ng-template",null,2,de),t(),i(14,"td")(15,"span",131),n(16),t()()()),o&2){let e=a.$implicit,r=se(6),s=se(13);l(2),C(e.sesion),l(2),d("ngIf",e.apuntes)("ngIfElse",r),l(4),d("ngClass",ce(9,nt,e.estadosesion==="REALIZADO",e.estadosesion==="SESI\xD3N PENDIENTE")),l(),C(e.estadosesion),l(2),d("ngIf",e.fecha)("ngIfElse",s),l(4),d("ngClass",Ce(12,ot,e.estadopago==="PAGADO",e.estadopago==="PENDIENTE",e.estadopago==="VENCIDO")),l(),C(e.estadopago)}}function Nt(o,a){o&1&&(i(0,"tr")(1,"td",144),n(2,"No hay sesiones registradas."),t()())}function jt(o,a){if(o&1&&(i(0,"div",72)(1,"div",137)(2,"div",114)(3,"strong"),n(4,"Cliente:"),t(),n(5),_(6,"br"),i(7,"strong"),n(8,"Carnet:"),t(),n(9),_(10,"br"),i(11,"strong"),n(12,"Celular:"),t(),n(13),_(14,"br"),t(),i(15,"div",114)(16,"strong"),n(17,"Dias:"),t(),n(18),_(19,"br"),i(20,"strong"),n(21,"Horario:"),t(),n(22),_(23,"br"),i(24,"strong"),n(25,"Tipo:"),t(),n(26),_(27,"br"),t()(),i(28,"div",138)(29,"table",139)(30,"thead",140)(31,"tr")(32,"th"),n(33,"# Sesi\xF3n"),t(),i(34,"th"),n(35,"Apuntes"),t(),i(36,"th"),n(37,"Estado Sesi\xF3n"),t(),i(38,"th"),n(39,"Fecha"),t(),i(40,"th"),n(41,"Estado de Pago"),t()()(),i(42,"tbody"),g(43,Lt,17,16,"tr",113)(44,Nt,3,0,"tr",15),t()()(),i(45,"small",97),n(46),y(47,"date"),y(48,"date"),t()()),o&2){let e=p().$implicit;l(5),V(" ",e.nombres," ",e.apellidos),l(4),b(" ",e.carnet),l(4),b(" ",e.celular),l(5),b(" ",e.fecha),l(4),b(" ",e.horario),l(4),b(" ",e.tipo),l(17),d("ngForOf",e.ciclos),l(),d("ngIf",!e.ciclos||e.ciclos.length===0),l(2),V("Creado: ",A(47,11,e.created_at,"longDate")," | Actualizado: ",A(48,14,e.updated_at,"longDate"))}}function Bt(o,a){if(o&1){let e=S();i(0,"div",122),_(1,"div",71),i(2,"div",123),x("click",function(){let s=h(e).$implicit;return v(s.expanded=!s.expanded)}),i(3,"div",124)(4,"h4",110)(5,"strong",125),n(6,"FECHA DE ADMISI\xD3N"),t(),i(7,"span",126),n(8),y(9,"dateFormat"),t()()(),i(10,"div",127),g(11,Tt,2,0,"span",128)(12,Vt,2,1,"span",129),i(13,"span",130),n(14),y(15,"currency"),i(16,"span",131),n(17),y(18,"currency"),t(),n(19),y(20,"currency"),t()(),i(21,"div",132)(22,"small",133),n(23,"\xA1Haz clic aqu\xED para m\xE1s detalles!"),t()()(),g(24,jt,49,17,"div",134),t()}if(o&2){let e=a.$implicit;l(8),C(T(9,8,e.fechaadmision)),l(3),d("ngIf",e.estado==="ACTIVO"),l(),d("ngIf",e.estado!=="ACTIVO"),l(2),b(" Precio: ",A(15,10,e.precio,"BOB")," | "),l(2),d("ngClass",xe(19,at,e.saldo>0)),l(),b(" Deuda: ",A(18,13,e.saldo,"BOB")," "),l(2),b(" | Pagado: ",A(20,16,e.pagado,"BOB")," "),l(5),d("ngIf",e.expanded)}}function Ht(o,a){o&1&&(i(0,"div",145),n(1," No hay registros de pagos. "),t())}function Wt(o,a){if(o&1&&(i(0,"div",68)(1,"div",71)(2,"div",72)(3,"h3"),n(4,"Estado de Pagos de Sesiones"),t(),i(5,"p"),n(6,"Consulta el estado de los pagos realizados y pendientes de tus sesiones."),t(),g(7,Bt,25,21,"div",120)(8,Ht,2,0,"div",121),t()()()),o&2){let e=p();l(7),d("ngForOf",e.Pagos),l(),d("ngIf",!e.Pagos||e.Pagos.length===0)}}function $t(o,a){o&1&&(i(0,"div",68)(1,"div",71)(2,"div",72)(3,"h3"),n(4,"Pesta\xF1a de Prueba 2"),t(),i(5,"p"),n(6,"Contenido de prueba 2."),t()()()())}function Ut(o,a){if(o&1&&(i(0,"div",146),n(1),t()),o&2){let e=p();l(),C(e.errorClave)}}function Xt(o,a){o&1&&(i(0,"div",147)(1,"div",148)(2,"span",149),n(3,"Cargando..."),t()()())}function qt(o,a){if(o&1&&(i(0,"tr")(1,"td"),n(2),t(),i(3,"td"),n(4),t(),i(5,"td"),n(6),t(),i(7,"td"),n(8),t(),i(9,"td"),n(10),t(),i(11,"td"),n(12),t(),i(13,"td"),n(14),t(),i(15,"td"),n(16),t(),i(17,"td"),n(18),t(),i(19,"td"),n(20),t(),i(21,"td"),n(22),t(),i(23,"td"),n(24),t(),i(25,"td"),n(26),t(),i(27,"td"),n(28),t(),i(29,"td"),n(30),t(),i(31,"td"),n(32),t(),i(33,"td"),n(34),t(),i(35,"td"),n(36),t(),i(37,"td"),n(38),t(),i(39,"td"),n(40),t()()),o&2){let e=a.$implicit;l(2),C(e.fechaadmision),l(2),C(e.estado),l(2),C(e.ciclos),l(2),C(e.cliente_apellidos),l(2),C(e.cliente_nombres),l(2),C(e.diagnostico),l(2),C(e.tipotratamiento),l(2),C(e.duracion),l(2),C(e.frecuencia),l(2),C(e.horario),l(2),C(e.tipo_pago),l(2),C(e.precio),l(2),C(e.saldo),l(2),C(e.pagado),l(2),C(e.descuento),l(2),C(e.fechapago),l(2),C(e.horapago),l(2),C(e.monto),l(2),C(e.estadopago),l(2),C(e.observacion)}}function Jt(o,a){if(o&1&&(i(0,"div",138)(1,"table",150)(2,"thead")(3,"tr")(4,"th"),n(5,"Fecha Admisi\xF3n"),t(),i(6,"th"),n(7,"Estado"),t(),i(8,"th"),n(9,"Ciclos"),t(),i(10,"th"),n(11,"Apellidos"),t(),i(12,"th"),n(13,"Nombres"),t(),i(14,"th"),n(15,"Diagn\xF3stico"),t(),i(16,"th"),n(17,"Tipo Tratamiento"),t(),i(18,"th"),n(19,"Duraci\xF3n"),t(),i(20,"th"),n(21,"Frecuencia"),t(),i(22,"th"),n(23,"Horario"),t(),i(24,"th"),n(25,"Tipo Pago"),t(),i(26,"th"),n(27,"Precio"),t(),i(28,"th"),n(29,"Saldo"),t(),i(30,"th"),n(31,"Pagado"),t(),i(32,"th"),n(33,"Descuento"),t(),i(34,"th"),n(35,"Fecha Pago"),t(),i(36,"th"),n(37,"Hora Pago"),t(),i(38,"th"),n(39,"Monto"),t(),i(40,"th"),n(41,"Estado Pago"),t(),i(42,"th"),n(43,"Observacion"),t()()(),i(44,"tbody"),g(45,qt,41,20,"tr",113),t()()()),o&2){let e=p();l(45),d("ngForOf",e.data)}}var L=class L{constructor(a,e,r,s,c,m,u){this.router=a;this._auth=e;this._infocli=r;this._demucas=s;this._pagos=c;this._tools=m;this._user=u;this.ruta=q.ruta;this.infoHJVida="";this.apunteSeleccionado="";this.lacargacion=!1;this.fechaA="";this.fechaB="";this.data=[];this.isLoadingInfoClientes=!0;this.InfoClientes=[];this.Demucas=[];this.Pagos=[];this.activeTab="home";this.menuOpen=!1;this.claveActual="";this.nuevaClave="";this.confirmarClave="";this.errorClave="";this.mostrarModalCambioClave=!1}ngOnInit(){this.PedirInformacionPerfil()}cargarinformacionpagosactivos(){this.lacargacion=!0;let a={fechaA:this.fechaA,fechaB:this.fechaB};this._pagos.obtenerClientesActivosPagos(a).subscribe(e=>{console.log(e),this.data=e,this.lacargacion=!1})}copiarINFOTabla(){let a=document.getElementById("tablaReporte");if(!a)return;let e=document.createRange();e.selectNode(a);let r=window.getSelection();r?.removeAllRanges(),r?.addRange(e),document.execCommand("copy"),r?.removeAllRanges()}CargarInfoClientes(){this._infocli.SeleccionarAllInformacionCliente(this.datasesion.usuario.id).subscribe(a=>{console.log("InfoClientes CARGADO",a.data),this.InfoClientes=a.data,this.isLoadingInfoClientes=!1},a=>{console.log("ERROR AL CARGAR InfoClientes",a),this.isLoadingInfoClientes=!1})}CargarGraficas(a,e,r){this._demucas.SeleccionarAllInformacionDemucas(a).subscribe(s=>{switch(console.log("Demucas para GRAFICOS CARGADO",s.data),this.Demucas=s.data,sessionStorage.setItem("idDemucas",a),sessionStorage.setItem("Nombre",this.datasesion.usuario.nombres+" "+this.datasesion.usuario.apellidos),sessionStorage.setItem("FechaAdmision",e),(r.button===2||r.button===1)&&r.preventDefault(),r.button){case 0:console.log("Clic izquierdo"),this.router.navigate(["/me/graficas"]);break;case 1:console.log("Clic de la rueda"),window.open("/me/graficas","_blank");break;case 2:console.log("Clic derecho");break;default:console.log("Otro tipo de clic")}},s=>{console.log("ERROR AL CARGAR Demucas",s)})}CargarPagos(){this._pagos.SeleccionarAllInformacionPagoIDCliente(this.datasesion.usuario.id).subscribe(a=>{console.log("Pagos CARGADO",a.data);var e=0;a.data.forEach(r=>{e==0?r.expanded=!0:r.expanded=!1,e=e+1}),this.Pagos=a.data},a=>{console.log("ERROR AL CARGAR Pagos",a)})}setTab(a){switch(a){case"estadisticas":this.activeTab=a,this.CargarInfoClientes();break;case"EstadoPagos":this.activeTab=a,this.CargarPagos();break;default:this.activeTab=a;break}}PedirInformacionPerfil(){this._auth.pedirPerfil().subscribe({next:a=>{console.log("Perfil data:",a),this.datasesion=a,this.infoHJVida=this.datasesion.usuario.hojadevida},error:a=>{console.error("Error al obtener el perfil:",a)}})}toggleMenu(){this.menuOpen=!this.menuOpen}cambiarClave(){if(this.errorClave="",!this.claveActual||!this.nuevaClave||!this.confirmarClave){this.errorClave="Todos los campos son obligatorios.";return}if(this.nuevaClave!==this.confirmarClave){this.errorClave="Las contrase\xF1as nuevas no coinciden.";return}if(this.nuevaClave.length<6){this.errorClave="La nueva contrase\xF1a debe tener al menos 6 caracteres.";return}this._auth.cambiarClave({claveActual:this.claveActual,nuevaClave:this.nuevaClave}).subscribe({next:a=>{this.mostrarModalCambioClave=!1,this.claveActual="",this.nuevaClave="",this.confirmarClave="",this.errorClave="",this._tools.MensajeInformacion("\xC9xito","Contrase\xF1a cambiada correctamente.","success")},error:a=>{this.errorClave=a?.error?.mensaje||"Error al cambiar la contrase\xF1a."}})}modificarHojadeVida(){let a={hojadevida:this.infoHJVida};this._user.ModificarHojadeVida(a,this.datasesion.usuario.id).subscribe({next:e=>{this._tools.MensajeInformacion("\xC9xito","Hoja de vida modificada correctamente.","success"),this.PedirInformacionPerfil()},error:e=>{this._tools.MensajeInformacion("Error",e?.error?.message||"Error al modificar la hoja de vida.","error")}})}};L.\u0275fac=function(e){return new(e||L)(P(X),P(K),P(Fe),P(J),P(Y),P(D),P(je))},L.\u0275cmp=H({type:L,selectors:[["app-perfil"]],standalone:!1,decls:109,vars:25,consts:[["formClave","ngForm"],["sinApuntes",""],["sinFecha",""],[1,"container-fluid"],[1,"row","flex-nowrap"],[1,"col-auto","col-md-3","col-xl-2","px-sm-2","px-0","sidebar",3,"ngClass"],["type","button",1,"navbar-toggler","text-dark","toggle-btn",3,"click"],[1,"d-flex","flex-column","align-items-center","align-items-sm-start","px-3","pt-2","min-vh-100"],["id","menu",1,"nav","nav-pills","flex-column","mb-sm-auto","mb-0","align-items-center","align-items-sm-start"],[1,"nav-item"],[1,"nav-link","align-middle","px-0",3,"click"],[1,"fs-4","bi-house"],["class","ms-1 d-sm-inline",4,"ngIf"],[1,"nav-link","px-0","align-middle","text-primary",3,"click"],[1,"fs-4","bi-person"],[4,"ngIf"],["tabindex","-1",1,"d-md-none","position-fixed","top-5","end-0","m-3",2,"z-index","1050"],[1,"btn","btn-primary","btn-floating",2,"border-radius","50%","width","56px","height","56px",3,"click"],[1,"bi","bi-list",2,"font-size","1.5rem"],[1,"col","py-3","bg-light"],["class","container mt-5",4,"ngIf"],["id","modalCambioClave","tabindex","-1","aria-labelledby","modalCambioClaveLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalCambioClaveLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["for","claveActual",1,"form-label"],["type","password","id","claveActual","name","claveActual","required","","autocomplete","current-password",1,"form-control",3,"ngModelChange","ngModel"],["for","nuevaClave",1,"form-label"],["type","password","id","nuevaClave","name","nuevaClave","required","","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmarClave",1,"form-label"],["type","password","id","confirmarClave","name","confirmarClave","required","","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"button"],[1,"btn","mouse-dir","success",3,"click"],[1,"bi","bi-pencil",2,"font-size","1rem"],[1,"dir-part"],["id","modalcambiohojadevida","tabindex","-1","aria-labelledby","modalCambioClaveLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"form-floating","mb-3","col-sm-12"],["name","infoHJVida",1,"quill-container-wrapper",3,"ngModelChange","modules","ngModel"],["id","modalApunte","tabindex","-1","aria-labelledby","modalApunteLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],["id","modalApunteLabel",1,"modal-title"],["disabled","",1,"quill-container-wrapper",3,"ngModelChange","modules","ngModel"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","modalInformacionPagos","tabindex","-1","aria-labelledby","modalCambioClaveLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog",2,"max-width","99%"],[1,"btn","btn-success","mb-2",3,"click"],[1,"row","mb-3"],[1,"col-md-4"],["for","fechaA",1,"form-label"],["type","date","id","fechaA","name","fechaA",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaB",1,"form-label"],["type","date","id","fechaB","name","fechaB",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4","d-flex","align-items-end"],[1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-search"],["class","d-flex justify-content-center align-items-center my-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"ms-1","d-sm-inline"],[1,"nav-link","px-0","align-middle",3,"click"],[1,"fs-4","bi-table"],[1,"fs-4","bi-currency-dollar"],[1,"container","mt-5"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"card-text"],[1,"row","mt-4","g-4"],[1,"col-md-6","col-lg-3"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","flex-column"],[1,"d-flex","align-items-center","mb-3"],[1,"bi","bi-key","fs-2","text-primary","me-2"],[1,"card-title","mb-0"],[1,"card-text","flex-grow-1"],[1,"btn","btn-outline-primary","mt-auto",3,"click"],["class","col-md-6 col-lg-3",4,"ngIf"],[1,"bi","bi-calendar-check","fs-2","text-success","me-2"],[1,"bi","bi-eye","fs-2","text-primary","me-2"],["data-bs-toggle","modal","data-bs-target","#modalInformacionPagos","title","Visualizar informaci\xF3n reporte pagos",1,"btn","btn-outline-primary","mt-auto",3,"click"],[1,"bi","bi-pencil-square","fs-2","text-warning","me-2"],[1,"btn","btn-outline-warning","mt-auto",3,"click"],[1,"bi","bi-bar-chart-line","fs-2","text-info","me-2"],[1,"btn","btn-outline-info","mt-auto",3,"click"],[1,"col-md-4","text-center"],["alt","Foto de perfil",1,"img-fluid","rounded-circle","mb-3",2,"width","150px","height","150px","object-fit","cover",3,"src"],[1,"badge","bg-success"],[1,"col-md-8"],[1,"table","table-bordered"],[1,"d-flex","flex-column"],[1,"text-muted"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center","gap-2","mb-3"],[1,"d-flex","align-items-center","gap-2"],["role","group","aria-label","Acciones de cuenta",1,"btn-group"],["type","button","data-bs-toggle","modal","data-bs-target","#modalCambioClave","title","Cambiar contrase\xF1a",1,"btn","btn-warning"],[1,"bi","bi-key-fill","me-1"],["type","button","class","btn btn-outline-secondary","data-bs-toggle","modal","data-bs-target","#modalcambiohojadevida","title",'Modificar "Hoja de vida"',4,"ngIf"],[1,"my-4"],["class","card shadow-sm mb-4",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#modalcambiohojadevida","title",'Modificar "Hoja de vida"',1,"btn","btn-outline-secondary"],[1,"bi","bi-pencil-square","me-1"],[1,"card","shadow-sm","mb-4"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"text-muted","d-block","mt-3"],[1,"row","mt-4"],[4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","mb-3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["type","button","title","ABRIR GRAFICAS (ctrl+click)",1,"btn","btn-secondary","ms-2",3,"mousedown"],[1,"bi","bi-bar-chart",2,"font-size","1.5rem"],[1,"card-title"],["class","mb-4 border border-primary rounded",4,"ngFor","ngForOf"],["class","text-center text-muted",4,"ngIf"],[1,"mb-4","border","border-primary","rounded"],[1,"card-header","d-flex","flex-column","flex-md-row","align-items-center","justify-content-between",2,"cursor","pointer","background","linear-gradient(90deg, #60d4cf, #054d5f)","color","white","box-shadow","0 4px 6px rgba(0, 0, 0, 0.1)",3,"click"],[1,"w-100","text-center","mb-2","mb-md-0"],[1,"text-light"],[1,"ms-2","text-light"],[1,"d-flex","align-items-center","flex-wrap","justify-content-center","justify-content-md-end","w-100"],["class","badge bg-success ms-2",4,"ngIf"],["class","badge bg-secondary ms-2",4,"ngIf"],[1,"ms-3"],[3,"ngClass"],[1,"text-center","mt-2","w-100"],[1,"text-warning","fw-bold"],["class","card-body",4,"ngIf"],[1,"badge","bg-success","ms-2"],[1,"badge","bg-secondary","ms-2"],[1,"row","mb-2"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[1,"table-light"],[1,"bg-light"],[4,"ngIf","ngIfElse"],["data-bs-toggle","modal","data-bs-target","#modalApunte",1,"btn","btn-outline-info",3,"click"],["colspan","5",1,"text-center","text-muted"],[1,"text-center","text-muted"],[1,"alert","alert-danger"],[1,"d-flex","justify-content-center","align-items-center","my-4"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],["id","tablaReporte",1,"table","table-bordered","table-sm"]],template:function(e,r){if(e&1){let s=S();i(0,"div",3)(1,"div",4)(2,"div",5)(3,"button",6),x("click",function(){return h(s),v(r.toggleMenu())}),n(4," \u2630 "),t(),i(5,"div",7)(6,"ul",8)(7,"li",9)(8,"button",10),x("click",function(){return h(s),v(r.setTab("home"))}),_(9,"i",11),g(10,rt,2,0,"span",12),t()(),i(11,"li")(12,"button",13),x("click",function(){return h(s),v(r.setTab("cuenta"))}),_(13,"i",14),g(14,lt,2,0,"span",12),t()(),g(15,ct,4,1,"li",15)(16,mt,4,1,"li",15),t(),_(17,"hr"),t()(),i(18,"div",16)(19,"button",17),x("click",function(){return h(s),v(r.toggleMenu())}),_(20,"i",18),t()(),i(21,"div",19),g(22,ht,25,5,"div",20)(23,Et,69,25,"div",20)(24,Mt,9,1,"div",20)(25,Wt,9,2,"div",20)(26,$t,7,0,"div",20),t()()(),i(27,"div",21)(28,"div",22)(29,"div",23)(30,"div",24)(31,"h5",25),n(32,"Cambiar contrase\xF1a"),t(),_(33,"button",26),t(),i(34,"div",27)(35,"form",null,0)(37,"div",28)(38,"label",29),n(39,"Contrase\xF1a actual"),t(),i(40,"input",30),M("ngModelChange",function(m){return h(s),z(r.claveActual,m)||(r.claveActual=m),v(m)}),t()(),i(41,"div",28)(42,"label",31),n(43,"Nueva contrase\xF1a"),t(),i(44,"input",32),M("ngModelChange",function(m){return h(s),z(r.nuevaClave,m)||(r.nuevaClave=m),v(m)}),t()(),i(45,"div",28)(46,"label",33),n(47,"Confirmar nueva contrase\xF1a"),t(),i(48,"input",34),M("ngModelChange",function(m){return h(s),z(r.confirmarClave,m)||(r.confirmarClave=m),v(m)}),t()(),g(49,Ut,2,1,"div",35),i(50,"div",36)(51,"button",37),x("click",function(){return h(s),v(r.cambiarClave())}),_(52,"i",38),n(53,"CAMBIAR CONTRASE\xD1A"),_(54,"span",39),t()()()()()()(),i(55,"div",40)(56,"div",41)(57,"div",23)(58,"div",24)(59,"h5",25),n(60,"Modificar Hoja de Vida"),t(),_(61,"button",26),t(),i(62,"div",27)(63,"form",null,0)(65,"div",42)(66,"quill-editor",43),M("ngModelChange",function(m){return h(s),z(r.infoHJVida,m)||(r.infoHJVida=m),v(m)}),t()(),i(67,"div",36)(68,"button",37),x("click",function(){return h(s),v(r.modificarHojadeVida())}),_(69,"i",38),n(70,"CAMBIAR INFORMACION DE HOJA DE VIDA"),_(71,"span",39),t()()()()()()(),i(72,"div",44)(73,"div",45)(74,"div",23)(75,"div",24)(76,"h5",46),n(77,"Detalle del Apunte"),t(),_(78,"button",26),t(),i(79,"div",27)(80,"quill-editor",47),M("ngModelChange",function(m){return h(s),z(r.apunteSeleccionado,m)||(r.apunteSeleccionado=m),v(m)}),t()(),i(81,"div",48)(82,"button",49),n(83,"Cerrar"),t()()()()(),i(84,"div",50)(85,"div",51)(86,"div",23)(87,"div",24)(88,"h5",25),n(89,"INFORMACION DE ACTIVOS PAGOS"),t(),_(90,"button",26),t(),i(91,"div",27)(92,"button",52),x("click",function(){return h(s),v(r.copiarINFOTabla())}),n(93," COPIAR AL PORTAPAPELES PARA PEGAR EN EXCEL "),t(),i(94,"div",53)(95,"div",54)(96,"label",55),n(97,"Fecha A"),t(),i(98,"input",56),M("ngModelChange",function(m){return h(s),z(r.fechaA,m)||(r.fechaA=m),v(m)}),t()(),i(99,"div",54)(100,"label",57),n(101,"Fecha B"),t(),i(102,"input",58),M("ngModelChange",function(m){return h(s),z(r.fechaB,m)||(r.fechaB=m),v(m)}),t()(),i(103,"div",59)(104,"button",60),x("click",function(){return h(s),v(r.cargarinformacionpagosactivos())}),_(105,"i",61),n(106," Filtrar por Fechas "),t()()(),g(107,Xt,4,0,"div",62)(108,Jt,46,1,"div",63),t()()()()}e&2&&(l(2),d("ngClass",ce(22,it,!r.menuOpen,!r.menuOpen)),l(8),d("ngIf",r.menuOpen),l(4),d("ngIf",r.menuOpen),l(),d("ngIf",r.datasesion.abilities&&r.datasesion.abilities.includes("CLIENTELA")),l(),d("ngIf",r.datasesion.abilities&&r.datasesion.abilities.includes("CLIENTELA")),l(6),d("ngIf",r.activeTab==="home"),l(),d("ngIf",r.activeTab==="cuenta"),l(),d("ngIf",r.activeTab==="estadisticas"),l(),d("ngIf",r.activeTab==="EstadoPagos"),l(),d("ngIf",r.activeTab==="prueba2"),l(14),G("ngModel",r.claveActual),l(4),G("ngModel",r.nuevaClave),l(4),G("ngModel",r.confirmarClave),l(),d("ngIf",r.errorClave),l(17),d("modules",r._tools.modulesQuillEdicion),G("ngModel",r.infoHJVida),l(14),d("modules",r._tools.modulesQuillShow),G("ngModel",r.apunteSeleccionado),l(18),G("ngModel",r.fechaA),l(4),G("ngModel",r.fechaB),l(5),d("ngIf",r.lacargacion),l(),d("ngIf",!r.lacargacion))},dependencies:[be,$,U,Te,Ae,Oe,Ge,Ve,Me,ze,Le,Ie,Ee,Q],styles:[".sidebar[_ngcontent-%COMP%]{border-right:2px solid black;background-color:#f8f9fa;transition:width .3s}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]{width:60px}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar.sidebar-collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.sidebar.sidebar-expanded[_ngcontent-%COMP%]{width:250px}.sidebar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{display:block;margin:1rem;border:none;background:transparent;cursor:pointer;font-size:1.5rem}.sidebar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]:focus{outline:none}.sidebar[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#343a40}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#007bff}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:70%}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]{width:60px}.sidebar.sidebar-expanded[_ngcontent-%COMP%]{width:250px}}"]});var Z=L;function Yt(o,a){if(o&1){let e=S();i(0,"li",7)(1,"a",8),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.FiltrarXEvaluaciones(s))}),n(2),t()()}if(o&2){let e=a.$implicit,r=p(3);l(),w("active",r.seleccionEvaluacion.includes(e)),l(),b(" ",e," ")}}function Qt(o,a){if(o&1&&(i(0,"div")(1,"h1",20),n(2,"Estadistica General por categor\xEDas"),t(),i(3,"h4",21),n(4,"Selecciona las Evaluaciones:"),t(),i(5,"ul",6),g(6,Yt,3,3,"li",22),t()()),o&2){let e=p(2);l(6),d("ngForOf",e.allevaluacionesdata)}}function Kt(o,a){if(o&1){let e=S();i(0,"li",7)(1,"a",8),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.FiltrarXCategorias(s))}),n(2),t()()}if(o&2){let e=a.$implicit,r=p(3);l(),w("active",r.seleccionCategoria.includes(e)),l(),b(" ",e," ")}}function Zt(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Selecciona categorias:"),t(),i(3,"ul",6),g(4,Kt,3,3,"li",22),t()()),o&2){let e=p(2);l(4),d("ngForOf",e.allcategoriasdata)}}function ei(o,a){if(o&1){let e=S();i(0,"div")(1,"ul",6)(2,"li",7)(3,"button",13),x("click",function(){h(e);let s=p(2);return v(s.GeneracionGrafica())}),_(4,"i",14),n(5," REFRESCAR GR\xC1FICA "),t()()()()}}function ti(o,a){if(o&1&&(i(0,"div"),g(1,Qt,7,1,"div",16)(2,Zt,5,1,"div",16)(3,ei,6,0,"div",16),i(4,"div",17)(5,"div",18),_(6,"apx-chart",19),t()()()),o&2){let e=p();l(),d("ngif",e.esAdmin),l(),d("ngif",e.esAdmin),l(),d("ngif",e.esAdmin),l(3),d("series",e.OpcionesGraficas.series)("chart",e.OpcionesGraficas.chart)("xaxis",e.OpcionesGraficas.xaxis)("title",e.OpcionesGraficas.title)("dataLabels",e.OpcionesGraficas.dataLabels)("plotOptions",e.OpcionesGraficas.plotOptions)("legend",e.OpcionesGraficas.legend)}}function ii(o,a){if(o&1){let e=S();i(0,"li",7)(1,"a",8),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.FiltrarXEvaluaciones2(s))}),n(2),t()()}if(o&2){let e=a.$implicit,r=p(3);l(),w("active",r.seleccionEvaluacion2.includes(e)),l(),b(" ",e," ")}}function ai(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Selecciona las Evaluaciones:"),t(),i(3,"ul",6),g(4,ii,3,3,"li",22),t()()),o&2){let e=p(2);l(4),d("ngForOf",e.allevaluacionesdata)}}function ni(o,a){if(o&1){let e=S();i(0,"li",7)(1,"a",8),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.FiltrarXCategorias2(s))}),n(2),t()()}if(o&2){let e=a.$implicit,r=p(3);l(),w("active",r.seleccionCategoria2.includes(e)),l(),b(" ",e," ")}}function oi(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Selecciona categorias:"),t(),i(3,"ul",6),g(4,ni,3,3,"li",22),t()()),o&2){let e=p(2);l(4),d("ngForOf",e.allcategoriasdata)}}function ri(o,a){if(o&1){let e=S();i(0,"div")(1,"h1",12),n(2,"Estadistica General por evaluaci\xF3n"),t(),g(3,ai,5,1,"div",16)(4,oi,5,1,"div",16),i(5,"div")(6,"ul",6)(7,"li",7)(8,"button",13),x("click",function(){h(e);let s=p();return v(s.GeneracionGrafica2())}),_(9,"i",14),n(10," REFRESCAR GR\xC1FICA "),t()()()(),i(11,"div",23),_(12,"apx-chart",19),t()()}if(o&2){let e=p();l(3),d("ngif",e.esAdmin),l(),d("ngif",e.esAdmin),l(8),d("series",e.OpcionesGraficas2.series)("chart",e.OpcionesGraficas2.chart)("xaxis",e.OpcionesGraficas2.xaxis)("title",e.OpcionesGraficas2.title)("dataLabels",e.OpcionesGraficas2.dataLabels)("plotOptions",e.OpcionesGraficas2.plotOptions)("legend",e.OpcionesGraficas2.legend)}}function li(o,a){if(o&1){let e=S();i(0,"li",7)(1,"a",8),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.FiltrarXEvaluacionesChorizo(s))}),n(2),t()()}if(o&2){let e=a.$implicit,r=p(3);l(),w("active",r.seleccionEvaluacionChorizo.includes(e)),l(),b(" ",e," ")}}function si(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Selecciona las Evaluaciones:"),t(),i(3,"ul",6),g(4,li,3,3,"li",22),t()()),o&2){let e=p(2);l(4),d("ngForOf",e.allevaluacionesdata)}}function ci(o,a){if(o&1){let e=S();i(0,"li",7)(1,"button",27),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.filtrarPorCategoria(s.key))}),_(2,"i",28),n(3),t()()}if(o&2){let e=a.$implicit;l(3),b(" Seleccionar ",e.key," ")}}function di(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Click Grupales:"),t(),i(3,"ul",6),g(4,ci,4,1,"li",22),y(5,"keyvalue"),t()()),o&2){let e=p(2);l(4),d("ngForOf",T(5,1,e.categoriasMap))}}function mi(o,a){if(o&1){let e=S();i(0,"li",7)(1,"a",8),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.FiltrarXPalabrasChorizo(s))}),n(2),t()()}if(o&2){let e=a.$implicit,r=p(3);l(),w("active",r.seleccionPalabrasChorizo.includes(e)),l(),b(" ",e," ")}}function pi(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Selecciona palabras:"),t(),i(3,"ul",6),g(4,mi,3,3,"li",22),t()()),o&2){let e=p(2);l(4),d("ngForOf",e.allpalabrasdata)}}function fi(o,a){if(o&1){let e=S();i(0,"div")(1,"ul",6)(2,"li",7)(3,"button",13),x("click",function(){h(e);let s=p(2);return v(s.GeneracionGraficaChorizo())}),_(4,"i",14),n(5," REFRESCAR GR\xC1FICA "),t()()()()}}function ui(o,a){if(o&1&&(i(0,"div"),_(1,"hr"),i(2,"h1",24),n(3,"Estadistica por \xE1reas"),t(),g(4,si,5,1,"div",16)(5,di,6,3,"div",16)(6,pi,5,1,"div",16)(7,fi,6,0,"div",16),i(8,"div",25),_(9,"apx-chart",26),t()()),o&2){let e=p();l(4),d("ngif",e.esAdmin),l(),d("ngif",e.esAdmin),l(),d("ngif",e.esAdmin),l(),d("ngif",e.esAdmin),l(2),d("series",e.OpcionesGraficasChorizo.series)("chart",e.OpcionesGraficasChorizo.chart)("xaxis",e.OpcionesGraficasChorizo.xaxis)("yaxis",e.OpcionesGraficasChorizo.yaxis)("title",e.OpcionesGraficasChorizo.title)("dataLabels",e.OpcionesGraficasChorizo.dataLabels)("plotOptions",e.OpcionesGraficasChorizo.plotOptions)("legend",e.OpcionesGraficasChorizo.legend)}}function _i(o,a){if(o&1){let e=S();i(0,"li",7)(1,"a",8),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.FiltrarXEvaluacionesChorizo2(s))}),n(2),t()()}if(o&2){let e=a.$implicit,r=p(3);l(),w("active",r.seleccionEvaluacionChorizo2.includes(e)),l(),b(" ",e," ")}}function hi(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Selecciona las Evaluaciones:"),t(),i(3,"ul",6),g(4,_i,3,3,"li",22),t()()),o&2){let e=p(2);l(4),d("ngForOf",e.allevaluacionesdata)}}function vi(o,a){if(o&1){let e=S();i(0,"li",7)(1,"button",27),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.filtrarPorCategoria2(s.key))}),_(2,"i",28),n(3),t()()}if(o&2){let e=a.$implicit;l(3),b(" Seleccionar ",e.key," ")}}function gi(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Click Grupales:"),t(),i(3,"ul",6),g(4,vi,4,1,"li",22),y(5,"keyvalue"),t()()),o&2){let e=p(2);l(4),d("ngForOf",T(5,1,e.categoriasMap2))}}function xi(o,a){if(o&1){let e=S();i(0,"li",7)(1,"a",8),x("click",function(){let s=h(e).$implicit,c=p(3);return v(c.FiltrarXPalabrasChorizo2(s))}),n(2),t()()}if(o&2){let e=a.$implicit,r=p(3);l(),w("active",r.seleccionPalabrasChorizo2.includes(e)),l(),b(" ",e," ")}}function Ci(o,a){if(o&1&&(i(0,"div")(1,"h4",21),n(2,"Selecciona palabras:"),t(),i(3,"ul",6),g(4,xi,3,3,"li",22),t()()),o&2){let e=p(2);l(4),d("ngForOf",e.allpalabrasdata)}}function bi(o,a){if(o&1){let e=S();i(0,"div"),_(1,"hr"),i(2,"h1",29),n(3,"Estadistica de \xE1reas por\xA0evaluaci\xF3n"),t(),g(4,hi,5,1,"div",16)(5,gi,6,3,"div",16)(6,Ci,5,1,"div",16),i(7,"div")(8,"ul",6)(9,"li",7)(10,"button",13),x("click",function(){h(e);let s=p();return v(s.GeneracionGraficaChorizo2())}),_(11,"i",14),n(12," REFRESCAR GR\xC1FICA "),t()()()(),i(13,"div",30),_(14,"apx-chart",26),t()()}if(o&2){let e=p();l(4),d("ngif",e.esAdmin),l(),d("ngif",e.esAdmin),l(),d("ngif",e.esAdmin),l(8),d("series",e.OpcionesGraficasChorizo2.series)("chart",e.OpcionesGraficasChorizo2.chart)("xaxis",e.OpcionesGraficasChorizo2.xaxis)("yaxis",e.OpcionesGraficasChorizo2.yaxis)("title",e.OpcionesGraficasChorizo2.title)("dataLabels",e.OpcionesGraficasChorizo2.dataLabels)("plotOptions",e.OpcionesGraficasChorizo2.plotOptions)("legend",e.OpcionesGraficasChorizo2.legend)}}function Ei(o,a){if(o&1&&(i(0,"div"),_(1,"apx-chart",31),t()),o&2){let e=p();l(),d("series",e.chartOptionsERICIM.series)("chart",e.chartOptionsERICIM.chart)("dataLabels",e.chartOptionsERICIM.dataLabels)("stroke",e.chartOptionsERICIM.stroke)("markers",e.chartOptionsERICIM.markers)("title",e.chartOptionsERICIM.title)("xaxis",e.chartOptionsERICIM.xaxis)("yaxis",e.chartOptionsERICIM.yaxis)("tooltip",e.chartOptionsERICIM.tooltip)("grid",e.chartOptionsERICIM.grid)("legend",e.chartOptionsERICIM.legend)}}function Si(o,a){o&1&&(i(0,"div",32),n(1," Cargando gr\xE1fico... "),t())}var N=class N{constructor(a,e,r,s,c){this._demucas=a;this._pagos=e;this._mescalas=r;this._tools=s;this._auth=c;this.infoRecolectada=[];this.infoRecolectada2=[];this.Pagos=[];this.MatrizEscalas=[];this.dataERICIM=[];this.nombrecliente="";this.fechaadmisioncliente="";this.esAdmin=!1;this.estadisticaGeneralCategorias=!0;this.estadisticaGeneralEvaluacion=!0;this.estadisticaPorAreas=!0;this.estadisticaAreasEvaluacion=!0;this.estadisticaERICIM=!0;this.allcategoriasdata=[];this.allevaluacionesdata=[];this.allpalabrasdata=[];this.seleccionCategoria=[];this.seleccionEvaluacion=[];this.seleccionCategoria2=[];this.seleccionEvaluacion2=[];this.seleccionCategoriaChorizo=[];this.seleccionEvaluacionChorizo=[];this.seleccionPalabrasChorizo=[];this.seleccionCategoriaChorizo2=[];this.seleccionEvaluacionChorizo2=[];this.seleccionPalabrasChorizo2=[];this.DetalleGrafica1={};this.categoriasMap={};this.categoriasMap2={};this.OpcionesGraficas={};this.DetalleGrafica2={};this.OpcionesGraficas2={};this.DetalleGraficaChorizo={};this.OpcionesGraficasChorizo={};this.DetalleGraficaChorizo2={};this.OpcionesGraficasChorizo2={};this.chartOptions={};this.allcategorias=["PRIMERA EVALUACI\xD3N","SEGUNDA EVALUACI\xD3N","TERCERA EVALUACI\xD3N","CUARTA EVALUACI\xD3N","QUINTA EVALUACI\xD3N","SEXTA EVALUACI\xD3N","S\xC9PTIMA EVALUACI\xD3N","OCTAVA EVALUACI\xD3N"];this.selectedMonths=[...this.allcategorias];this.allProducts=["Producto A","Producto B","Producto C"];this.selectedProducts=[...this.allProducts];this.productData={"Producto A":[44,55,41,67,22,43,21,49,13,10,20,30,40,50,60,70,80,90,100,110],"Producto B":[13,23,20,8,13,27,33,12,25,23,12,14,15,16,17,18,19,20,21,22],"Producto C":[11,17,15,15,21,14,15,13,17,18,19,20,21,22,23,24,25,26,27,28]};this.showChart=!1;this.chartOptionsERICIM={}}ngOnInit(){var a=Number(sessionStorage.getItem("idDemucas"));this.nombrecliente=sessionStorage.getItem("Nombre"),this.fechaadmisioncliente=sessionStorage.getItem("FechaAdmision"),this.revisarSiHaySesion(),this._demucas.SeleccionarAllInformacionDemucas(a).subscribe(e=>{this.infoRecolectada=e.data,this.infoRecolectada2=e.data,console.log(this.infoRecolectada),console.table(this.infoRecolectada),this.preparandoInformacion(),this.GeneracionGrafica(),this.GeneracionGrafica2(),this.GeneracionGraficaChorizo(),this.GeneracionGraficaChorizo2()},e=>{console.log("ERROR AL CARGAR Demucas",e)}),this._mescalas.ObtenerMatrizEscalas().subscribe(e=>{this.MatrizEscalas=e.data.filter(r=>r.categoria.includes("ESCALA DE RELACIONES INTERMUSICALES (ERI)")||r.categoria.includes("CLASIFICACI\xD3N EN INTERACCI\xD3N MUSICAL (CIM)")),console.log("MatrizEscalas ERI CIM CARGADO",this.MatrizEscalas),this._pagos.SeleccionarAllInformacionPagoIDinfoCliente(a).subscribe(r=>{console.log("Pagos para ERI CIM CARGADO",r.data),this.Pagos=r.data;let m=[...this.Pagos.reduce((u,f)=>u.concat(f.ciclos),[]).map(u=>{let f={eri:null,cim:null};if(u.eri){let E=this.MatrizEscalas.find(I=>I.nombrematriz.trim()===u.eri.trim()&&I.categoria.includes("ERI"));E&&(f.eri=E.valor)}if(u.cim){let E=this.MatrizEscalas.find(I=>I.nombrematriz.trim()===u.cim.trim()&&I.categoria.includes("CIM"));E&&(f.cim=E.valor)}return le(re({},u),{puntaje:f})})].sort((u,f)=>Number(u.nrociclo)-Number(f.nrociclo)||Number(u.sesion)-Number(f.sesion));this.dataERICIM=m,console.log(this.dataERICIM),this.prepareChartData()},r=>{console.log("ERROR AL CARGAR Pagos para ERI CIM",r)})},e=>{console.log("ERROR AL CARGAR MatrizEscalas",e)})}revisarSiHaySesion(){this._auth.revisarSiesAdmin().subscribe(a=>{this.esAdmin=a},a=>{console.error("Error al verificar si es admin:",a),this.esAdmin=!1})}filtrarPorCategoria(a){(this.categoriasMap[a]||[]).forEach(r=>this.FiltrarXPalabrasChorizo(r))}filtrarPorCategoria2(a){(this.categoriasMap[a]||[]).forEach(r=>this.FiltrarXPalabrasChorizo2(r))}preparandoInformacion(){let a=[...new Set(this.infoRecolectada.map(c=>c.categoria))],e=[...new Set(this.infoRecolectada.map(c=>c.evaluacion))],r=[...new Set(this.infoRecolectada.map(c=>c.palabra))];this.allcategoriasdata=a,this.allevaluacionesdata=e,this.allpalabrasdata=r,console.log(a),console.log(e),console.log("inforecolectada",this.infoRecolectada),console.log("all palabras",r);let s=this.infoRecolectada.reduce((c,m)=>(c[m.categoria]||(c[m.categoria]=[]),c[m.categoria].push(m.palabra),c),{});this.categoriasMap=s,this.categoriasMap2=s,this.seleccionCategoria=[...this.allcategoriasdata],this.seleccionEvaluacion=[...this.allevaluacionesdata],this.seleccionCategoria2=[...this.allcategoriasdata],this.seleccionEvaluacion2=[...this.allevaluacionesdata],this.seleccionCategoriaChorizo=[...this.allcategoriasdata],this.seleccionEvaluacionChorizo=[...this.allevaluacionesdata],this.seleccionPalabrasChorizo=[...this.allpalabrasdata],this.seleccionCategoriaChorizo2=[...this.allcategoriasdata],this.seleccionEvaluacionChorizo2=[...this.allevaluacionesdata],this.seleccionPalabrasChorizo2=[...this.allpalabrasdata]}prepararCategoriaData(){this.DetalleGrafica1={};let a={NADA:0,POCO:1,MUCHO:2};this.seleccionCategoria.forEach(e=>{let r=this.infoRecolectada.filter(c=>c.categoria===e),s=[];this.seleccionEvaluacion.forEach(c=>{let m=r.filter(I=>I.evaluacion===c),u=0,f=0;m.forEach(I=>{let O=I.multiplicar?I.multiplicar:1,ne=2*O;if(!(I.escala==null||a[I.escala]==null)){u+=ne;let oe=a[I.escala]*O;f+=oe}});let E=0;u>0&&(E=Math.round(f/u*100)),s.push(E)}),this.DetalleGrafica1[e]=s}),console.log(this.DetalleGrafica1)}GeneracionGrafica(){if(this.prepararCategoriaData(),this.seleccionCategoria.length===0||this.seleccionEvaluacion.length===0){console.error("No hay categor\xEDas o evaluaciones seleccionadas.");return}if(Object.keys(this.DetalleGrafica1).length===0){console.error("DetalleGrafica1 est\xE1 vac\xEDo o no est\xE1 correctamente formado.");return}let a=this.seleccionCategoria.map(f=>({name:f,data:this.seleccionEvaluacion.map((E,I)=>this.DetalleGrafica1[f][I]||0)})),e=30,r=10,s=500,c=this.seleccionEvaluacion.length*(this.seleccionCategoria.length*(e+r)+r),m=200,u=c+m+100;console.log("sera admin?",this.esAdmin),this.OpcionesGraficas={series:a,chart:{animations:{enabled:!1},type:"bar",height:s,width:u,stacked:!1,toolbar:{show:!0,tools:{download:this.esAdmin==!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0},events:{mounted:f=>{let E=f.el.querySelector(".apexcharts-legend");E&&(E.style.right="0",E.style.left="auto")}}},title:{text:"Estadistica General por categor\xEDas",align:"center",margin:10,style:{fontSize:"16px",fontWeight:"bold",color:"#333"}},xaxis:{categories:this.seleccionEvaluacion,labels:{formatter:f=>f.split(" ").join(`
`),style:{fontSize:"12px",fontWeight:600}},axisBorder:{show:!0,color:"#78909C"},axisTicks:{show:!0,color:"#78909C"},title:{text:"Evaluaciones",style:{fontSize:"14px",fontWeight:"bold",color:"#333"}}},yaxis:{min:0,max:100,labels:{formatter:f=>`${f}%`,style:{fontSize:"12px"}},title:{text:"Porcentaje",style:{fontSize:"14px",fontWeight:"bold",color:"#333"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",fontWeight:"bold",colors:["#333"]},formatter:f=>`${f}%`,background:{enabled:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:`${e}px`,endingShape:"rounded",dataLabels:{position:"top"},distributed:!1}},legend:{position:"right",horizontalAlign:"center",verticalAlign:"middle",offsetY:0,offsetX:0,height:"auto",width:m,itemMargin:{horizontal:5,vertical:8},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0},fontSize:"12px",fontWeight:600,markers:{width:14,height:14,radius:4,offsetX:-4,offsetY:0},labels:{colors:"#333",useSeriesColors:!1},formatter:function(f,E){return f.length>200?f.substring(0,200)+"...":f}},colors:["#3f51b5","#ff4081","#4caf50","#ff9800","#9c27b0","#00bcd4","#e91e63","#8bc34a","#ff5722","#607d8b"],grid:{row:{colors:["#f5f5f5","transparent"],opacity:.1},padding:{top:10,right:m+20,bottom:0,left:20}},tooltip:{y:{formatter:f=>`${f}%`,title:{formatter:f=>`${f}:`}},theme:"light",style:{fontSize:"14px"}},responsive:[{breakpoint:1200,options:{chart:{width:"100%"},legend:{position:"bottom",horizontalAlign:"center"},grid:{padding:{right:20}}}}]}}FiltrarXEvaluaciones(a){this.seleccionEvaluacion.includes(a)?this.seleccionEvaluacion=this.seleccionEvaluacion.filter(e=>e!==a):this.seleccionEvaluacion.push(a),console.log(this.seleccionEvaluacion),this.seleccionEvaluacion.sort((e,r)=>this.allevaluacionesdata.indexOf(e)-this.allevaluacionesdata.indexOf(r)),this.GeneracionGrafica()}FiltrarXCategorias(a){this.seleccionCategoria.includes(a)?this.seleccionCategoria=this.seleccionCategoria.filter(e=>e!==a):this.seleccionCategoria.push(a),this.seleccionCategoria.sort((e,r)=>this.allcategoriasdata.indexOf(e)-this.allcategoriasdata.indexOf(r)),this.GeneracionGrafica()}prepararCategoriaData2(){this.DetalleGrafica2={};let a={NADA:0,POCO:1,MUCHO:2};this.seleccionCategoria2.forEach(e=>{let r=this.infoRecolectada2.filter(c=>c.categoria===e),s=[];this.seleccionEvaluacion2.forEach(c=>{let m=r.filter(I=>I.evaluacion===c),u=0,f=0;m.forEach(I=>{let O=I.multiplicar?I.multiplicar:1,ne=2*O;if(!(I.escala==null||a[I.escala]==null)){u+=ne;let oe=a[I.escala]*O;f+=oe}});let E=0;u>0&&(E=Math.round(f/u*100)),s.push(E)}),this.DetalleGrafica2[e]=s})}GeneracionGrafica2(){if(this.prepararCategoriaData2(),this.seleccionCategoria2.length===0||this.seleccionEvaluacion2.length===0){console.error("No hay categor\xEDas o evaluaciones seleccionadas.");return}if(Object.keys(this.DetalleGrafica2).length===0){console.error("DetalleGrafica2 est\xE1 vac\xEDo o no est\xE1 correctamente formado.");return}let a=this.seleccionEvaluacion2.map(u=>({name:u,data:this.seleccionCategoria2.map(f=>this.DetalleGrafica2[f]?.[this.seleccionEvaluacion2.indexOf(u)]||0)})),e=38,r=10,s=400,m=this.seleccionCategoria2.length*this.seleccionEvaluacion2.length*(e+r)+100;this.OpcionesGraficas2={series:a,chart:{animations:{enabled:!1},type:"bar",height:s,width:m,stacked:!1,toolbar:{show:!0,tools:{download:this.esAdmin==!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0}},title:{text:"Estadistica General por evaluaci\xF3n"},xaxis:{categories:this.seleccionCategoria2,labels:{formatter:u=>u.split(" ").join(`
`),style:{fontSize:"12px"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#000"]},formatter:u=>`${u}%`},plotOptions:{bar:{horizontal:!1,columnWidth:e+"px",endingShape:"rounded",dataLabels:{position:"top"}}},legend:{position:"top",onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}}}}FiltrarXEvaluaciones2(a){this.seleccionEvaluacion2.includes(a)?this.seleccionEvaluacion2=this.seleccionEvaluacion2.filter(e=>e!==a):this.seleccionEvaluacion2.push(a),console.log(this.seleccionEvaluacion2),this.seleccionEvaluacion2.sort((e,r)=>this.allevaluacionesdata.indexOf(e)-this.allevaluacionesdata.indexOf(r)),this.GeneracionGrafica2()}FiltrarXCategorias2(a){this.seleccionCategoria2.includes(a)?this.seleccionCategoria2=this.seleccionCategoria2.filter(e=>e!==a):this.seleccionCategoria2.push(a),this.seleccionCategoria2.sort((e,r)=>this.allcategoriasdata.indexOf(e)-this.allcategoriasdata.indexOf(r)),this.GeneracionGrafica2()}prepararCategoriaDataChorizo(){this.DetalleGraficaChorizo={};let a={NADA:0,POCO:1,MUCHO:2};this.seleccionEvaluacionChorizo.forEach(e=>{let r=this.infoRecolectada.filter(c=>c.evaluacion===e),s=[];this.seleccionPalabrasChorizo.forEach(c=>{let m=r.filter(f=>f.palabra===c),u=0;m.forEach(f=>{let E=f.multiplicar?f.multiplicar:1;if(!(f.escala==null||a[f.escala]==null)){let O=a[f.escala]*E;u+=O}}),s.push(u)}),this.DetalleGraficaChorizo[e]=s}),console.table(this.DetalleGraficaChorizo)}GeneracionGraficaChorizo(){if(this.prepararCategoriaDataChorizo(),this.seleccionEvaluacionChorizo.length===0){console.error("No hay evaluaciones seleccionadas.");return}if(Object.keys(this.DetalleGraficaChorizo).length===0){console.error("DetalleGraficaChorizo est\xE1 vac\xEDo o no est\xE1 correctamente formado.");return}let a=this.seleccionEvaluacionChorizo.map(u=>({name:u,data:this.DetalleGraficaChorizo[u]||[]})),e=30,r=10,s=400,m=this.seleccionPalabrasChorizo.length*this.seleccionEvaluacionChorizo.length*(e+r)+100;this.OpcionesGraficasChorizo={series:a,chart:{animations:{enabled:!1},type:"bar",height:m,stacked:!1,toolbar:{show:!0,tools:{download:this.esAdmin==!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0}},title:{text:"Estadistica por \xE1reas"},plotOptions:{bar:{horizontal:!0,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetX:10,style:{fontSize:"12px",colors:["#000"]}},stroke:{show:!0,width:1,colors:["#fff"]},tooltip:{shared:!0,intersect:!1},xaxis:{categories:this.seleccionPalabrasChorizo,labels:{formatter:u=>u.length>200?u.substring(0,200)+"...":u,style:{fontSize:"12px"}}},legend:{position:"top",onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}}}}FiltrarXEvaluacionesChorizo(a){this.seleccionEvaluacionChorizo.includes(a)?this.seleccionEvaluacionChorizo=this.seleccionEvaluacionChorizo.filter(e=>e!==a):this.seleccionEvaluacionChorizo.push(a),console.log(this.seleccionEvaluacionChorizo),this.seleccionEvaluacionChorizo.sort((e,r)=>this.allevaluacionesdata.indexOf(e)-this.allevaluacionesdata.indexOf(r)),this.GeneracionGraficaChorizo()}FiltrarXPalabrasChorizo(a){this.seleccionPalabrasChorizo.includes(a)?this.seleccionPalabrasChorizo=this.seleccionPalabrasChorizo.filter(e=>e!==a):this.seleccionPalabrasChorizo.push(a),this.seleccionPalabrasChorizo.sort((e,r)=>this.allpalabrasdata.indexOf(e)-this.allpalabrasdata.indexOf(r)),this.GeneracionGraficaChorizo()}prepararCategoriaDataChorizo2(){this.DetalleGraficaChorizo2={};let a={NADA:0,POCO:1,MUCHO:2};this.seleccionEvaluacionChorizo2.forEach(e=>{let r=this.infoRecolectada.filter(c=>c.evaluacion===e),s=[];this.seleccionPalabrasChorizo2.forEach(c=>{let m=r.filter(f=>f.palabra===c),u=0;m.forEach(f=>{let E=f.multiplicar?f.multiplicar:1;if(!(f.escala==null||a[f.escala]==null)){let O=a[f.escala]*E;u+=O}}),s.push(u)}),this.DetalleGraficaChorizo2[e]=s}),console.table(this.DetalleGraficaChorizo2)}GeneracionGraficaChorizo2(){if(this.prepararCategoriaDataChorizo2(),this.seleccionEvaluacionChorizo2.length===0){console.error("No hay evaluaciones seleccionadas.");return}if(Object.keys(this.DetalleGraficaChorizo2).length===0){console.error("DetalleGraficaChorizo2 est\xE1 vac\xEDo o no est\xE1 correctamente formado.");return}let a=this.seleccionPalabrasChorizo2.map(m=>({name:m,data:this.seleccionEvaluacionChorizo2.map(u=>{let f=this.seleccionPalabrasChorizo2.indexOf(m);return this.DetalleGraficaChorizo2[u][f]||0})})),s=this.seleccionPalabrasChorizo2.length*(30+10)+150,c=a.map(m=>le(re({},m),{data:m.data.map(u=>u===0?.01:u)}));this.OpcionesGraficasChorizo2={series:c,chart:{animations:{enabled:!1},type:"bar",height:s,stacked:!1,toolbar:{show:!0,tools:{download:this.esAdmin==!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0}},title:{text:"Estadistica de \xE1reas por evaluaci\xF3n",align:"center",style:{fontSize:"16px",fontWeight:"bold"}},plotOptions:{bar:{barHeight:"100%",horizontal:!0,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetX:10,style:{fontSize:"12px",colors:["#000"]},formatter:m=>m===.01?0:m},stroke:{show:!0,width:1,colors:["#fff"]},tooltip:{shared:!0,intersect:!1,y:{formatter:function(m){return m===.01?0:m}}},xaxis:{categories:this.seleccionEvaluacionChorizo2,labels:{formatter:m=>m.length>13?m.substring(0,13)+"...":m,style:{fontSize:"12px"}},axisBorder:{show:!0},axisTicks:{show:!0},title:{text:"Evaluaciones",style:{fontSize:"14px",fontWeight:"bold"}}},legend:{position:"right",labels:{colors:"#333",useSeriesColors:!1,style:{fontSize:"12px",fontWeight:"bold"}},markers:{width:12,height:12,radius:4,offsetX:-4,offsetY:0},itemMargin:{horizontal:10,vertical:5}},grid:{padding:{right:20,left:20}},colors:["#7e007eff","#ff4081","#4caf50","#ff9800","#85628bff","#00bcd4","#e91e63","#8bc34a","#ff5722","#607d8b","#795548","#cddc39","#f44336","#2196f3","#ffc107","#440da3ff","#009688","#bdbdbd","#ffeb3b","#c69dd1ff","#d84315","#43a047","#1e88e5","#fbc02d","#6d4c41","#00acc1","#d4e157","#e53935","#3949ab","#fdd835","#5e35b1","#00897b","#a1887f","#595264ff","#388e3c","#0288d1","#afb42b","#c62828","#303f9f","#ffa000","#512da8","#00796b","#f5f5f5","#b2dfdb","#ffb300","#ff7043","#968299ff","#26a69a","#ec407a","#78909c","#dce775","#ff5252","#448aff","#ffd600","#b0bec5","#ff8a65","#9b8a9eff","#4dd0e1","#e4195dff","#90a4ae","#e6ee9c","#ff1744","#2979ff","#ffff00","#cfd8dc","#ffccbc","#bda1c2ff","#80cbc4","#f8bbd0","#b3e5fc","#d1c4e9","#c8e6c9","#ffecb3","#ffe0b2","#d7ccc8","#f0f4c3","#fff9c4","#fbe9e7","#ede7f6","#e0f7fa"]}}FiltrarXEvaluacionesChorizo2(a){this.seleccionEvaluacionChorizo2.includes(a)?this.seleccionEvaluacionChorizo2=this.seleccionEvaluacionChorizo2.filter(e=>e!==a):this.seleccionEvaluacionChorizo2.push(a),console.log(this.seleccionEvaluacionChorizo2),this.seleccionEvaluacionChorizo2.sort((e,r)=>this.allevaluacionesdata.indexOf(e)-this.allevaluacionesdata.indexOf(r)),this.GeneracionGraficaChorizo2()}FiltrarXPalabrasChorizo2(a){this.seleccionPalabrasChorizo2.includes(a)?this.seleccionPalabrasChorizo2=this.seleccionPalabrasChorizo2.filter(e=>e!==a):this.seleccionPalabrasChorizo2.push(a),this.seleccionPalabrasChorizo2.sort((e,r)=>this.allpalabrasdata.indexOf(e)-this.allpalabrasdata.indexOf(r)),this.GeneracionGraficaChorizo2()}cargarbarras(){let a=this.selectedProducts.map(u=>({name:u,data:this.selectedMonths.map(f=>{let E=this.allcategorias.indexOf(f);return this.productData[u][E]})})),e=30,r=10,s=400,m=this.selectedProducts.length*this.selectedMonths.length*(e+r)+100;this.chartOptions={series:a,chart:{type:"bar",height:s,width:m,stacked:!1,toolbar:{show:!0,tools:{download:this.esAdmin==!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0}},title:{text:"Ventas Mensuales por Producto"},xaxis:{categories:this.selectedMonths,labels:{formatter:u=>u.split(" ").join(`
`),style:{fontSize:"12px"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#000"]}},plotOptions:{bar:{horizontal:!1,columnWidth:e+"px",endingShape:"rounded",dataLabels:{position:"top"}}},legend:{position:"top"}}}toggleMonth(a){this.selectedMonths.includes(a)?this.selectedMonths=this.selectedMonths.filter(e=>e!==a):this.selectedMonths.push(a),this.selectedMonths.sort((e,r)=>this.allcategorias.indexOf(e)-this.allcategorias.indexOf(r)),this.cargarbarras()}toggleProduct(a){this.selectedProducts.includes(a)?this.selectedProducts=this.selectedProducts.filter(e=>e!==a):this.selectedProducts.push(a),this.selectedProducts.sort((e,r)=>this.allProducts.indexOf(e)-this.allProducts.indexOf(r)),this.cargarbarras()}prepareChartData(){let a=this.dataERICIM.filter(c=>c.estadosesion==="REALIZADO"&&c.fecha);a.sort((c,m)=>c.fecha.localeCompare(m.fecha));let e=a.map(c=>[this._tools.formatoFechaEspanol(c.fecha),`Ciclo ${c.nrociclo} - Sesi\xF3n ${c.sesion}`]),r=a.map(c=>c.puntaje.eri?parseFloat(c.puntaje.eri):null),s=a.map(c=>c.puntaje.cim?parseFloat(c.puntaje.cim):null);this.chartOptionsERICIM={series:[{name:"ERI",data:r,color:"#3B82F6"},{name:"CIM",data:s,color:"#10B981"}],chart:{animations:{enabled:!1},height:500,type:"line",zoom:{enabled:!0},toolbar:{show:!0,tools:{download:this.esAdmin==!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}}},dataLabels:{enabled:!0,formatter:c=>(c??"").toString()?c.toFixed(1):"",background:{enabled:!0,borderRadius:2}},stroke:{curve:"smooth",width:3},markers:{size:5,hover:{size:8}},title:{text:"Evoluci\xF3n de Puntajes ERI y CIM",align:"center",style:{fontSize:"16px"}},xaxis:{categories:e,labels:{rotate:0,trim:!1,hideOverlappingLabels:!1,style:{fontSize:"10px"}},tickPlacement:"on"},download:!1,yaxis:{min:0,max:10,title:{text:"Puntaje"},labels:{formatter:c=>c.toFixed(0)}},tooltip:{custom:({series:c,seriesIndex:m,dataPointIndex:u,w:f})=>{let E=a[u];return`
            <div class="apexcharts-tooltip-box">
              <div><strong>Ciclo:</strong> ${E.nrociclo}</div>
              <div><strong>Sesi\xF3n:</strong> ${E.sesion}</div>
              <div><strong>Fecha:</strong> ${this._tools.formatoFechaEspanol(E.fecha)}</div>
              <div class="mt-2"><strong>ERI:</strong> ${E.puntaje.eri||"N/A"}</div>
              <div><strong>CIM:</strong> ${E.puntaje.cim||"N/A"}</div>
            </div>
          `}},grid:{row:{colors:["#f3f3f3f3","transparent"],opacity:.5}},legend:{position:"top"}},this.showChart=!0}};N.\u0275fac=function(e){return new(e||N)(P(J),P(Y),P(De),P(D),P(K))},N.\u0275cmp=H({type:N,selectors:[["app-graficas"]],standalone:!1,decls:43,vars:20,consts:[[1,"mt-4","fondoBajo"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","text-danger"],[1,"lead","text-primary"],[1,"row","justify-content-center"],[1,"nav","nav-tabs","mb-3"],[1,"nav-item"],["href","javascript:void(0)",1,"nav-link",3,"click"],[1,"fondoBajo"],[4,"ngIf"],[1,"chart-container"],["id","generalXevaluacion",1,"text-center","text-danger"],["href","javascript:void(0)","title","CLICK",1,"btn","btn-outline-primary","p-1","py-0",3,"click"],[1,"bi","bi-arrow-clockwise",2,"font-size","1.5rem"],["class","loading-message",4,"ngIf"],[4,"ngif"],["id","chart",2,"width","100%","overflow-x","auto"],[2,"min-width","800px"],[3,"series","chart","xaxis","title","dataLabels","plotOptions","legend"],["id","generalXcategoria",1,"text-center","text-danger"],[1,"text-primary"],["class","nav-item",4,"ngFor","ngForOf"],["id","chart2",2,"width","100%","overflow-x","auto"],["id","Xareas",1,"text-center","text-danger"],["id","chart3",2,"width","100%","overflow-x","auto"],[3,"series","chart","xaxis","yaxis","title","dataLabels","plotOptions","legend"],["href","javascript:void(0)","title","CLICK GRUPAL",1,"btn","btn-outline-primary","p-1","py-0",3,"click"],[1,"bi","bi-hand-index",2,"font-size","1.5rem"],["id","areasXevaluacion",1,"text-center","text-danger"],["id","chart4",2,"width","100%","overflow-x","auto"],[3,"series","chart","dataLabels","stroke","markers","title","xaxis","yaxis","tooltip","grid","legend"],[1,"loading-message"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4,"GR\xC1FICAS DE LOS DEMUCAS "),t(),i(5,"p",4),n(6),y(7,"dateFormat"),t()()(),_(8,"hr"),i(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8),x("click",function(){return r.estadisticaGeneralCategorias=!r.estadisticaGeneralCategorias}),n(13," Ir a Estadistica General por categor\xEDas "),t()(),i(14,"li",7)(15,"a",8),x("click",function(){return r.estadisticaGeneralEvaluacion=!r.estadisticaGeneralEvaluacion}),n(16," Ir a Estadistica General por evaluaci\xF3n "),t()(),i(17,"li",7)(18,"a",8),x("click",function(){return r.estadisticaPorAreas=!r.estadisticaPorAreas}),n(19," Ir a Estadistica por \xE1reas "),t()(),i(20,"li",7)(21,"a",8),x("click",function(){return r.estadisticaAreasEvaluacion=!r.estadisticaAreasEvaluacion}),n(22," Ir a Estadistica de \xE1reas por evaluaci\xF3n "),t()(),i(23,"li",7)(24,"a",8),x("click",function(){return r.estadisticaERICIM=!r.estadisticaERICIM}),n(25," Ir a Evoluci\xF3n de puntajes ERI y CIM "),t()()()()(),i(26,"div",9),g(27,ti,7,10,"div",10),_(28,"hr"),g(29,ri,13,9,"div",10)(30,ui,10,12,"div",10)(31,bi,15,11,"div",10),i(32,"div",11)(33,"h1",12),n(34,"EVOLUCI\xD3N DE PUNTAJES ERI y CIM"),t(),i(35,"div")(36,"ul",6)(37,"li",7)(38,"button",13),x("click",function(){return r.prepareChartData()}),_(39,"i",14),n(40," REFRESCAR GR\xC1FICA "),t()()()(),g(41,Ei,2,11,"div",10)(42,Si,2,0,"div",15),t()()),e&2&&(l(6),V("Visualizando Gr\xE1ficas Demucas del Cliente: ",r.nombrecliente," de la Admisi\xF3n: ",T(7,18,r.fechaadmisioncliente)),l(6),w("active",r.estadisticaGeneralCategorias),l(3),w("active",r.estadisticaGeneralEvaluacion),l(3),w("active",r.estadisticaPorAreas),l(3),w("active",r.estadisticaAreasEvaluacion),l(3),w("active",r.estadisticaERICIM),l(3),d("ngIf",r.estadisticaGeneralCategorias),l(2),d("ngIf",r.estadisticaGeneralEvaluacion),l(),d("ngIf",r.estadisticaPorAreas),l(),d("ngIf",r.estadisticaAreasEvaluacion),l(10),d("ngIf",r.estadisticaERICIM),l(),d("ngIf",!r.showChart))},dependencies:[$,U,We,Se,Q],encapsulation:2});var te=N;var k=class k{constructor(a,e,r){this.router=a;this.http=e;this._tool=r;this.ruta=q.ruta}canActivate(a,e){let r=localStorage.getItem("token");return r?this.http.post(this.ruta+"api/verify-token",{token:r}).pipe(fe(s=>(console.log(s),s&&s.name?!0:(this._tool.MensajeInformacionAccesoNoPermitidoGuard(),!1))),ue(s=>(this._tool.MensajeInformacionAccesoNoPermitidoGuard(),pe(!1)))):(this._tool.MensajeInformacionAccesoNoPermitidoGuard(),!1)}};k.\u0275fac=function(e){return new(e||k)(B(X),B(Pe),B(D))},k.\u0275prov=_e({token:k,factory:k.\u0275fac,providedIn:"root"});var ie=k;var Ii=[{path:"perfil",component:Z,canActivate:[ie]},{path:"graficas",component:te}],R=class R{};R.\u0275fac=function(e){return new(e||R)},R.\u0275mod=W({type:R}),R.\u0275inj=j({imports:[me.forChild(Ii),me]});var ae=R;var F=class F{};F.\u0275fac=function(e){return new(e||F)},F.\u0275mod=W({type:F}),F.\u0275inj=j({imports:[ye,ke,Re,ae,$e,we,He,Be,Ne]});var Xe=F;export{Xe as PrivadosModule};
