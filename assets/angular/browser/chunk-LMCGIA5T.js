import{a as ke,b as Ve,c as Re,d as Ne}from"./chunk-I4JBTZLJ.js";import{c as Te,d as Y,f as Q,g as Fe}from"./chunk-7VOUYD7O.js";import{a as Me}from"./chunk-YXMHNPCV.js";import{$ as f,Ab as ye,Bb as Ge,Ea as oe,Fa as fe,Ga as he,Ha as E,I as ne,Ia as A,J as me,Ja as y,Jb as we,K as l,Ka as U,Kb as ze,Lb as Ae,M as w,N,O as B,Pb as De,Qa as ge,Ra as X,S as v,Sa as W,Ua as ve,Wa as _e,Xa as Ce,Y as c,Z as a,_ as i,aa as pe,ba as ue,bb as xe,ca as S,da as _,ea as m,eb as be,f as le,i as se,ma as L,mb as q,n as ce,oa as O,pb as re,qb as Ee,ra as o,sa as P,sb as Se,t as de,ta as u,u as V,ua as z,vb as Pe,w as R,wa as j,wb as Ie,xa as $,y as C,ya as H,yb as Oe,z as x}from"./chunk-QTYTZ526.js";import"./chunk-GAL4ENT6.js";var We=r=>({"sidebar-collapsed":r}),qe=r=>({"text-danger fw-bold":r}),Ye=(r,t)=>({"badge bg-success":r,"badge bg-warning text-dark":t}),Qe=(r,t,e)=>({"badge bg-success":r,"badge bg-warning text-dark":t,"badge bg-danger":e});function Ze(r,t){r&1&&(a(0,"span",42),o(1,"P\xE1gina principal"),i())}function Je(r,t){r&1&&(a(0,"span",42),o(1,"Cuenta"),i())}function Ke(r,t){r&1&&(a(0,"span",42),o(1,"Demucas"),i())}function et(r,t){if(r&1){let e=S();a(0,"li")(1,"button",17),_("click",function(){C(e);let s=m();return x(s.setTab("estadisticas"))}),f(2,"i",43),v(3,Ke,2,0,"span",13),i()()}if(r&2){let e=m();l(3),c("ngIf",e.menuOpen)}}function tt(r,t){r&1&&(a(0,"span",42),o(1,"Pagos"),i())}function it(r,t){if(r&1){let e=S();a(0,"div",51)(1,"div",52)(2,"div",53)(3,"div",54),f(4,"i",60),a(5,"h5",56),o(6,"Verificar Pagos"),i()(),a(7,"p",57),o(8,"Verificar los estados de tus Sesiones y Pagos"),i(),a(9,"button",61),_("click",function(){C(e);let s=m(2);return x(s.setTab("EstadoPagos"))}),o(10,"Verificar"),i()()()()}}function at(r,t){if(r&1){let e=S();a(0,"div",51)(1,"div",52)(2,"div",53)(3,"div",54),f(4,"i",62),a(5,"h5",56),o(6,"Verificar progreso"),i()(),a(7,"p",57),o(8,"Consulta tu progreso y logros."),i(),a(9,"button",63),_("click",function(){C(e);let s=m(2);return x(s.setTab("estadisticas"))}),o(10,"Ver progreso"),i()()()()}}function nt(r,t){if(r&1){let e=S();a(0,"div",44)(1,"div",45)(2,"div",46)(3,"div",47)(4,"div",48)(5,"h2"),o(6),i(),a(7,"p",49),o(8,"Aqu\xED puedes gestionar todas tus configuraciones, ver tu actividad reciente y actualizar tu informaci\xF3n personal."),i(),a(9,"div",50)(10,"div",51)(11,"div",52)(12,"div",53)(13,"div",54),f(14,"i",55),a(15,"h5",56),o(16,"Cambiar contrase\xF1a"),i()(),a(17,"p",57),o(18,"Actualiza tu contrase\xF1a para mantener tu cuenta segura."),i(),a(19,"button",58),_("click",function(){C(e);let s=m();return x(s.setTab("cuenta"))}),o(20,"Cambiar"),i()()()(),v(21,it,11,0,"div",59)(22,at,11,0,"div",59),i()()()()()()}if(r&2){let e=m();l(6),u("BIENVENIDO ",e.datasesion.usuario.nombres+" "+e.datasesion.usuario.apellidos),l(15),c("ngIf",e.datasesion.abilities&&e.datasesion.abilities.includes("Clientela")),l(),c("ngIf",e.datasesion.abilities&&e.datasesion.abilities.includes("Clientela"))}}function ot(r,t){if(r&1&&f(0,"img",70),r&2){let e=m(2);c("src",e.datasesion.usuario.foto,me)}}function rt(r,t){r&1&&(a(0,"div",71),f(1,"i",72),i())}function lt(r,t){if(r&1&&(a(0,"div",44)(1,"div",47)(2,"div",48)(3,"h3"),o(4,"Cuenta"),i(),a(5,"p"),o(6,"Informaci\xF3n de la cuenta y opciones de seguridad."),i(),a(7,"div",45)(8,"div",64),v(9,ot,1,1,"img",65)(10,rt,2,0,"ng-template",null,1,U),a(12,"h4"),o(13),i(),a(14,"span",66),o(15),i()(),a(16,"div",67)(17,"table",68)(18,"tbody")(19,"tr")(20,"th"),o(21,"Usuario"),i(),a(22,"td"),o(23),i()(),a(24,"tr")(25,"th"),o(26,"Edad en el momento de registro"),i(),a(27,"td"),o(28),i()(),a(29,"tr")(30,"th"),o(31,"Fecha de nacimiento"),i(),a(32,"td"),o(33),E(34,"dateFormat"),i()(),a(35,"tr")(36,"th"),o(37,"Carnet"),i(),a(38,"td"),o(39),i()(),a(40,"tr")(41,"th"),o(42,"Celular"),i(),a(43,"td"),o(44),i()(),a(45,"tr")(46,"th"),o(47,"Informaci\xF3n registrada el"),i(),a(48,"td"),o(49),E(50,"date"),i()(),a(51,"tr")(52,"th"),o(53,"\xDAltima actualizaci\xF3n de Informaci\xF3n"),i(),a(54,"td"),o(55),E(56,"date"),i()()()(),a(57,"button",69),o(58," Cambiar contrase\xF1a "),i()()()()()()),r&2){let e=L(11),n=m();l(9),c("ngIf",n.datasesion.usuario.foto)("ngIfElse",e),l(4),z("",n.datasesion.usuario.nombres," ",n.datasesion.usuario.apellidos),l(2),P(n.datasesion.usuario.estado),l(8),P(n.datasesion.usuario.usuario),l(5),P(n.datasesion.usuario.edad),l(5),P(A(34,12,n.datasesion.usuario.fechnac)),l(6),P(n.datasesion.usuario.carnet),l(5),P(n.datasesion.usuario.celular),l(5),P(y(50,14,n.datasesion.usuario.created_at,"longDate")),l(6),P(y(56,17,n.datasesion.usuario.updated_at,"longDate"))}}function st(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"Tutor:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.tutor)}}function ct(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"Residencia actual:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.residenciaactual)}}function dt(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"Objetivos generales:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.objgenerales)}}function mt(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"F\xEDsico:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.fisico)}}function pt(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"Emocional:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.emocional)}}function ut(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"Cognitivo:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.cognitivo)}}function ft(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"Social:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.social)}}function ht(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"M\xE9todos a usar:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.metodosausar)}}function gt(r,t){if(r&1&&(a(0,"p")(1,"strong"),o(2,"Notas:"),i(),o(3),i()),r&2){let e=m().$implicit;l(3),u(" ",e.notas)}}function vt(r,t){if(r&1&&(a(0,"div")(1,"strong"),o(2,"Cuestionario:"),i(),f(3,"div",82),i()),r&2){let e=m().$implicit;l(3),c("innerHTML",e.cuestionario,ne)}}function _t(r,t){if(r&1){let e=S();pe(0),a(1,"div",75)(2,"div",76)(3,"div",48)(4,"div",77)(5,"h3",56),o(6),E(7,"dateFormat"),i(),a(8,"button",78),_("mousedown",function(s){let d=C(e).$implicit,h=m(2);return x(h.CargarGraficas(d.id,d.fechaadmision,s))}),f(9,"i",79),i()(),a(10,"h5",80),o(11),i(),a(12,"p")(13,"strong"),o(14,"Tipo de Tratamiento:"),i(),o(15),i(),a(16,"p")(17,"strong"),o(18,"Duraci\xF3n:"),i(),o(19),i(),a(20,"p")(21,"strong"),o(22,"Fecha de admisi\xF3n:"),i(),o(23),E(24,"date"),i(),a(25,"p")(26,"strong"),o(27,"Frecuencia:"),i(),o(28),i(),v(29,st,4,1,"p",16)(30,ct,4,1,"p",16)(31,dt,4,1,"p",16)(32,mt,4,1,"p",16)(33,pt,4,1,"p",16)(34,ut,4,1,"p",16)(35,ft,4,1,"p",16)(36,ht,4,1,"p",16)(37,gt,4,1,"p",16)(38,vt,4,1,"div",16),f(39,"hr"),a(40,"small",81),o(41),E(42,"date"),E(43,"date"),i()()()(),ue()}if(r&2){let e=t.$implicit;l(6),u("Fecha de admisi\xF3n: ",A(7,18,e.fechaadmision)),l(5),u("Diagn\xF3stico: ",e.diagnostico),l(4),u(" ",e.tipotratamiento),l(4),u(" ",e.duracion," minutos"),l(4),u(" ",y(24,20,e.fechaadmision,"longDate")),l(5),u(" ",e.frecuencia),l(),c("ngIf",e.tutor),l(),c("ngIf",e.residenciaactual),l(),c("ngIf",e.objgenerales),l(),c("ngIf",e.fisico),l(),c("ngIf",e.emocional),l(),c("ngIf",e.cognitivo),l(),c("ngIf",e.social),l(),c("ngIf",e.metodosausar),l(),c("ngIf",e.notas),l(),c("ngIf",e.cuestionario),l(3),z("Creado: ",y(42,23,e.created_at,"longDate")," | Actualizado: ",y(43,26,e.updated_at,"longDate"))}}function Ct(r,t){if(r&1&&(a(0,"div",44)(1,"div",47)(2,"div",48)(3,"h3"),o(4,"INFORMACI\xD3N DEMUCAS Y AVANCES"),i(),a(5,"p"),o(6,"Visualiza tus estad\xEDsticas de DEMUCAS aqu\xED."),i(),a(7,"div",73),v(8,_t,44,29,"ng-container",74),i()()()()),r&2){let e=m();l(8),c("ngForOf",e.InfoClientes)}}function xt(r,t){r&1&&(a(0,"span",101),o(1,"Activo"),i())}function bt(r,t){if(r&1&&(a(0,"span",102),o(1),i()),r&2){let e=m().$implicit;l(),P(e.estado)}}function Et(r,t){if(r&1&&(a(0,"span"),o(1),E(2,"dateFormat"),i()),r&2){let e=m().$implicit;l(),P(A(2,1,e.fecha))}}function St(r,t){r&1&&(a(0,"span",81),o(1,"Sin fecha"),i())}function Pt(r,t){if(r&1&&f(0,"span",82),r&2){let e=m().$implicit;c("innerHTML",e.apuntes,ne)}}function It(r,t){r&1&&(a(0,"span",81),o(1,"Sin apuntes"),i())}function Ot(r,t){if(r&1&&(a(0,"tr")(1,"td"),o(2),i(),a(3,"td")(4,"span",96),o(5),i()(),a(6,"td"),v(7,Et,3,3,"span",103)(8,St,2,0,"ng-template",null,2,U),i(),a(10,"td")(11,"span",96),o(12),i()(),a(13,"td",104),v(14,Pt,1,1,"span",105)(15,It,2,0,"ng-template",null,3,U),i()()),r&2){let e=t.$implicit,n=L(9),s=L(16);l(2),P(e.sesion),l(2),c("ngClass",fe(9,Ye,e.estadosesion==="REALIZADO",e.estadosesion==="SESI\xD3N PENDIENTE")),l(),P(e.estadosesion),l(2),c("ngIf",e.fecha)("ngIfElse",n),l(4),c("ngClass",he(12,Qe,e.estadopago==="PAGADO",e.estadopago==="PENDIENTE",e.estadopago==="VENCIDO")),l(),P(e.estadopago),l(2),c("ngIf",e.apuntes)("ngIfElse",s)}}function yt(r,t){r&1&&(a(0,"tr")(1,"td",106),o(2,"No hay sesiones registradas."),i()())}function Gt(r,t){if(r&1&&(a(0,"div",86)(1,"div",47)(2,"div",87)(3,"div",88)(4,"h4",89)(5,"strong"),o(6,"FECHA DE ADMISI\xD3N"),i(),a(7,"span",90),o(8),E(9,"dateFormat"),i()()(),a(10,"div",91)(11,"span",92)(12,"strong"),o(13),i()(),v(14,xt,2,0,"span",93)(15,bt,2,1,"span",94),a(16,"span",95),o(17),E(18,"currency"),a(19,"span",96),o(20),E(21,"currency"),i(),o(22),E(23,"currency"),i()()(),a(24,"div",48)(25,"div",97)(26,"div",75)(27,"strong"),o(28,"Cliente:"),i(),o(29),f(30,"br"),a(31,"strong"),o(32,"Carnet:"),i(),o(33),f(34,"br"),a(35,"strong"),o(36,"Celular:"),i(),o(37),f(38,"br"),i(),a(39,"div",75)(40,"strong"),o(41,"Dias:"),i(),o(42),f(43,"br"),a(44,"strong"),o(45,"Horario:"),i(),o(46),f(47,"br"),a(48,"strong"),o(49,"Tipo:"),i(),o(50),f(51,"br"),i()(),a(52,"div",98)(53,"table",99)(54,"thead",100)(55,"tr")(56,"th"),o(57,"# Sesi\xF3n"),i(),a(58,"th"),o(59,"Estado Sesi\xF3n"),i(),a(60,"th"),o(61,"Fecha"),i(),a(62,"th"),o(63,"Estado de Pago"),i(),a(64,"th"),o(65,"Apuntes"),i()()(),a(66,"tbody"),v(67,Ot,17,16,"tr",74)(68,yt,3,0,"tr",16),i()()(),a(69,"small",81),o(70),E(71,"date"),E(72,"date"),i()()()()),r&2){let e=t.$implicit;l(8),P(A(9,19,e.fechaadmision)),l(5),u("Pago #",e.id),l(),c("ngIf",e.estado==="ACTIVO"),l(),c("ngIf",e.estado!=="ACTIVO"),l(2),u(" Precio: ",y(18,21,e.precio,"BOB")," | "),l(2),c("ngClass",oe(36,qe,e.saldo>0)),l(),u(" Deuda: ",y(21,24,e.saldo,"BOB")," "),l(2),u(" | Pagado: ",y(23,27,e.pagado,"BOB")," "),l(7),z(" ",e.nombres," ",e.apellidos),l(4),u(" ",e.carnet),l(4),u(" ",e.celular),l(5),u(" ",e.fecha),l(4),u(" ",e.horario),l(4),u(" ",e.tipo),l(17),c("ngForOf",e.ciclos),l(),c("ngIf",!e.ciclos||e.ciclos.length===0),l(2),z("Creado: ",y(71,30,e.created_at,"longDate")," | Actualizado: ",y(72,33,e.updated_at,"longDate"))}}function wt(r,t){r&1&&(a(0,"div",107),o(1," No hay registros de pagos. "),i())}function zt(r,t){if(r&1&&(a(0,"div",83)(1,"div",47)(2,"div",48)(3,"h3"),o(4,"Estado de Pagos de Sesiones"),i(),a(5,"p"),o(6,"Consulta el estado de los pagos realizados y pendientes de tus sesiones."),i(),v(7,Gt,73,38,"div",84)(8,wt,2,0,"div",85),i()()()),r&2){let e=m();l(7),c("ngForOf",e.Pagos),l(),c("ngIf",!e.Pagos||e.Pagos.length===0)}}function At(r,t){r&1&&(a(0,"div",44)(1,"div",47)(2,"div",48)(3,"h3"),o(4,"Pesta\xF1a de Prueba 2"),i(),a(5,"p"),o(6,"Contenido de prueba 2."),i()()()())}function Dt(r,t){if(r&1&&(a(0,"div",108),o(1),i()),r&2){let e=m();l(),P(e.errorClave)}}var M=class M{constructor(t,e,n,s,d){this.router=t;this._auth=e;this._infocli=n;this._demucas=s;this._pagos=d;this.isLoadingInfoClientes=!0;this.InfoClientes=[];this.Demucas=[];this.Pagos=[];this.activeTab="home";this.menuOpen=!1;this.claveActual="";this.nuevaClave="";this.confirmarClave="";this.errorClave="";this.mostrarModalCambioClave=!1}ngOnInit(){this.PedirInformacionPerfil()}CargarInfoClientes(){this._infocli.SeleccionarAllInformacionCliente(this.datasesion.usuario.id).subscribe(t=>{console.log("InfoClientes CARGADO",t.data),this.InfoClientes=t.data,this.isLoadingInfoClientes=!1},t=>{console.log("ERROR AL CARGAR InfoClientes",t),this.isLoadingInfoClientes=!1})}CargarGraficas(t,e,n){this._demucas.SeleccionarAllInformacionDemucas(t).subscribe(s=>{switch(console.log("Demucas para GRAFICOS CARGADO",s.data),this.Demucas=s.data,sessionStorage.setItem("idDemucas",t),sessionStorage.setItem("Nombre",this.datasesion.usuario.nombres+" "+this.datasesion.usuario.apellidos),sessionStorage.setItem("FechaAdmision",e),(n.button===2||n.button===1)&&n.preventDefault(),n.button){case 0:console.log("Clic izquierdo"),this.router.navigate(["/me/graficas"]);break;case 1:console.log("Clic de la rueda"),window.open("/me/graficas","_blank");break;case 2:console.log("Clic derecho");break;default:console.log("Otro tipo de clic")}},s=>{console.log("ERROR AL CARGAR Demucas",s)})}CargarPagos(){this._pagos.SeleccionarAllInformacionPagoIDCliente(this.datasesion.usuario.id).subscribe(t=>{console.log("Pagos CARGADO",t.data),this.Pagos=t.data},t=>{console.log("ERROR AL CARGAR Pagos",t)})}setTab(t){switch(t){case"estadisticas":this.activeTab=t,this.CargarInfoClientes();break;case"EstadoPagos":this.activeTab=t,this.CargarPagos();break;default:this.activeTab=t;break}}PedirInformacionPerfil(){this._auth.pedirPerfil().subscribe({next:t=>{console.log("Perfil data:",t),this.datasesion=t},error:t=>{console.error("Error al obtener el perfil:",t)}})}toggleMenu(){this.menuOpen=!this.menuOpen}cambiarClave(){if(this.errorClave="",!this.claveActual||!this.nuevaClave||!this.confirmarClave){this.errorClave="Todos los campos son obligatorios.";return}if(this.nuevaClave!==this.confirmarClave){this.errorClave="Las contrase\xF1as nuevas no coinciden.";return}if(this.nuevaClave.length<6){this.errorClave="La nueva contrase\xF1a debe tener al menos 6 caracteres.";return}this._auth.cambiarClave({claveActual:this.claveActual,nuevaClave:this.nuevaClave}).subscribe({next:t=>{this.mostrarModalCambioClave=!1,this.claveActual="",this.nuevaClave="",this.confirmarClave="",this.errorClave="",alert("Contrase\xF1a cambiada exitosamente.")},error:t=>{this.errorClave=t?.error?.mensaje||"Error al cambiar la contrase\xF1a."}})}};M.\u0275fac=function(e){return new(e||M)(w(q),w(Me),w(Te),w(Y),w(Fe))},M.\u0275cmp=N({type:M,selectors:[["app-perfil"]],standalone:!1,decls:55,vars:16,consts:[["formClave","ngForm"],["defaultFoto",""],["sinFecha",""],["sinApuntes",""],[1,"container-fluid"],[1,"row","flex-nowrap"],[1,"col-auto","col-md-3","col-xl-2","px-sm-2","px-0","sidebar",3,"ngClass"],["type","button",1,"navbar-toggler","text-dark","toggle-btn",3,"click"],[1,"d-flex","flex-column","align-items-center","align-items-sm-start","px-3","pt-2","min-vh-100"],["id","menu",1,"nav","nav-pills","flex-column","mb-sm-auto","mb-0","align-items-center","align-items-sm-start"],[1,"nav-item"],[1,"nav-link","align-middle","px-0",3,"click"],[1,"fs-4","bi-house"],["class","ms-1 d-sm-inline",4,"ngIf"],[1,"nav-link","px-0","align-middle","text-primary",3,"click"],[1,"fs-4","bi-person"],[4,"ngIf"],[1,"nav-link","px-0","align-middle",3,"click"],[1,"fs-4","bi-currency-dollar"],[1,"col","py-3","bg-light"],["class","container mt-5",4,"ngIf"],["class","container mt-5","style","max-width: 90%;",4,"ngIf"],["id","modalCambioClave","tabindex","-1","aria-labelledby","modalCambioClaveLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalCambioClaveLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","claveActual",1,"form-label"],["type","password","id","claveActual","name","claveActual","required","","autocomplete","current-password",1,"form-control",3,"ngModelChange","ngModel"],["for","nuevaClave",1,"form-label"],["type","password","id","nuevaClave","name","nuevaClave","required","","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmarClave",1,"form-label"],["type","password","id","confirmarClave","name","confirmarClave","required","","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"button"],[1,"btn","mouse-dir","success",3,"click"],[1,"bi","bi-pencil",2,"font-size","1rem"],[1,"dir-part"],[1,"ms-1","d-sm-inline"],[1,"fs-4","bi-table"],[1,"container","mt-5"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"card-text"],[1,"row","mt-4","g-4"],[1,"col-md-6","col-lg-3"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","flex-column"],[1,"d-flex","align-items-center","mb-3"],[1,"bi","bi-key","fs-2","text-primary","me-2"],[1,"card-title","mb-0"],[1,"card-text","flex-grow-1"],[1,"btn","btn-outline-primary","mt-auto",3,"click"],["class","col-md-6 col-lg-3",4,"ngIf"],[1,"bi","bi-pencil-square","fs-2","text-warning","me-2"],[1,"btn","btn-outline-warning","mt-auto",3,"click"],[1,"bi","bi-bar-chart-line","fs-2","text-info","me-2"],[1,"btn","btn-outline-info","mt-auto",3,"click"],[1,"col-md-4","text-center"],["alt","Foto de perfil","class","img-fluid rounded-circle mb-3","style","width: 150px; height: 150px; object-fit: cover;",3,"src",4,"ngIf","ngIfElse"],[1,"badge","bg-success"],[1,"col-md-8"],[1,"table","table-bordered"],["type","button","data-bs-toggle","modal","data-bs-target","#modalCambioClave",1,"btn","btn-primary","mb-3"],["alt","Foto de perfil",1,"img-fluid","rounded-circle","mb-3",2,"width","150px","height","150px","object-fit","cover",3,"src"],[1,"bg-secondary","rounded-circle","d-flex","align-items-center","justify-content-center","mb-3",2,"width","150px","height","150px"],[1,"bi-person","fs-1","text-white"],[1,"row","mt-4"],[4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","mb-3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["type","button","title","ABRIR GRAFICAS (ctrl+click)",1,"btn","btn-secondary","ms-2",3,"mousedown"],[1,"bi","bi-bar-chart",2,"font-size","1.5rem"],[1,"card-title"],[1,"text-muted"],[3,"innerHTML"],[1,"container","mt-5",2,"max-width","90%"],["class","mb-4",4,"ngFor","ngForOf"],["class","text-center text-muted",4,"ngIf"],[1,"mb-4"],[1,"card-header","d-flex","flex-column","flex-md-row","align-items-center","justify-content-between"],[1,"w-100","text-center","mb-2","mb-md-0"],[1,"mb-0","text-light"],[1,"ms-2"],[1,"d-flex","align-items-center","flex-wrap","justify-content-center","justify-content-md-end","w-100"],[1,"me-2"],["class","badge bg-success ms-2",4,"ngIf"],["class","badge bg-secondary ms-2",4,"ngIf"],[1,"ms-3"],[3,"ngClass"],[1,"row","mb-2"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[1,"table-light"],[1,"badge","bg-success","ms-2"],[1,"badge","bg-secondary","ms-2"],[4,"ngIf","ngIfElse"],[1,"bg-light"],[3,"innerHTML",4,"ngIf","ngIfElse"],["colspan","5",1,"text-center","text-muted"],[1,"text-center","text-muted"],[1,"alert","alert-danger"]],template:function(e,n){if(e&1){let s=S();a(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),_("click",function(){return C(s),x(n.toggleMenu())}),o(4," \u2630 "),i(),a(5,"div",8)(6,"ul",9)(7,"li",10)(8,"button",11),_("click",function(){return C(s),x(n.setTab("home"))}),f(9,"i",12),v(10,Ze,2,0,"span",13),i()(),a(11,"li")(12,"button",14),_("click",function(){return C(s),x(n.setTab("cuenta"))}),f(13,"i",15),v(14,Je,2,0,"span",13),i()(),v(15,et,4,1,"li",16),a(16,"li")(17,"button",17),_("click",function(){return C(s),x(n.setTab("EstadoPagos"))}),f(18,"i",18),v(19,tt,2,0,"span",13),i()()(),f(20,"hr"),i()(),a(21,"div",19),v(22,nt,23,3,"div",20)(23,lt,59,20,"div",20)(24,Ct,9,1,"div",20)(25,zt,9,2,"div",21)(26,At,7,0,"div",20),i()()(),a(27,"div",22)(28,"div",23)(29,"div",24)(30,"div",25)(31,"h5",26),o(32,"Cambiar contrase\xF1a"),i(),f(33,"button",27),i(),a(34,"div",28)(35,"form",29,0),_("ngSubmit",function(){return C(s),x(n.cambiarClave())}),a(37,"div",30)(38,"label",31),o(39,"Contrase\xF1a actual"),i(),a(40,"input",32),H("ngModelChange",function(h){return C(s),$(n.claveActual,h)||(n.claveActual=h),x(h)}),i()(),a(41,"div",30)(42,"label",33),o(43,"Nueva contrase\xF1a"),i(),a(44,"input",34),H("ngModelChange",function(h){return C(s),$(n.nuevaClave,h)||(n.nuevaClave=h),x(h)}),i()(),a(45,"div",30)(46,"label",35),o(47,"Confirmar nueva contrase\xF1a"),i(),a(48,"input",36),H("ngModelChange",function(h){return C(s),$(n.confirmarClave,h)||(n.confirmarClave=h),x(h)}),i()(),v(49,Dt,2,1,"div",37),a(50,"div",38)(51,"button",39),_("click",function(){return C(s),x(n.cambiarClave())}),f(52,"i",40),o(53,"CAMBIAR CONTRASE\xD1A"),f(54,"span",41),i()()()()()()()}e&2&&(l(2),c("ngClass",oe(14,We,!n.menuOpen)),l(8),c("ngIf",n.menuOpen),l(4),c("ngIf",n.menuOpen),l(),c("ngIf",n.datasesion.abilities&&n.datasesion.abilities.includes("Clientela")),l(4),c("ngIf",n.menuOpen),l(3),c("ngIf",n.activeTab==="home"),l(),c("ngIf",n.activeTab==="cuenta"),l(),c("ngIf",n.activeTab==="estadisticas"),l(),c("ngIf",n.activeTab==="EstadoPagos"),l(),c("ngIf",n.activeTab==="prueba2"),l(14),j("ngModel",n.claveActual),l(4),j("ngModel",n.nuevaClave),l(4),j("ngModel",n.confirmarClave),l(),c("ngIf",n.errorClave))},dependencies:[ge,X,W,Ge,Se,Pe,Ie,we,ye,Oe,_e,ve,Q],styles:[".sidebar[_ngcontent-%COMP%]{border-right:2px solid black;background-color:#f8f9fa;transition:width .3s}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]{width:60px}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar.sidebar-collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.sidebar.sidebar-expanded[_ngcontent-%COMP%]{width:250px}.sidebar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{display:block;margin:1rem;border:none;background:transparent;cursor:pointer;font-size:1.5rem}.sidebar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]:focus{outline:none}.sidebar[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#343a40}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#007bff}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:70%}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]{width:60px}.sidebar.sidebar-expanded[_ngcontent-%COMP%]{width:250px}}"]});var Z=M;function Tt(r,t){if(r&1){let e=S();a(0,"li",7)(1,"a",8),_("click",function(){let s=C(e).$implicit,d=m(2);return x(d.FiltrarXEvaluaciones(s))}),o(2),i()()}if(r&2){let e=t.$implicit,n=m(2);l(),O("active",n.seleccionEvaluacion.includes(e)),l(),u(" ",e," ")}}function Ft(r,t){if(r&1){let e=S();a(0,"li",7)(1,"a",8),_("click",function(){let s=C(e).$implicit,d=m(2);return x(d.FiltrarXCategorias(s))}),o(2),i()()}if(r&2){let e=t.$implicit,n=m(2);l(),O("active",n.seleccionCategoria.includes(e)),l(),u(" ",e," ")}}function Mt(r,t){if(r&1&&(a(0,"div")(1,"div")(2,"h1",11),o(3,"Estadistica General por categor\xEDas"),i(),a(4,"h4",12),o(5,"Selecciona las Evaluaciones:"),i(),a(6,"ul",6),v(7,Tt,3,3,"li",13),i()(),a(8,"div")(9,"h4",12),o(10,"Selecciona categorias:"),i(),a(11,"ul",6),v(12,Ft,3,3,"li",13),i()(),a(13,"div",14),f(14,"apx-chart",15),i()()),r&2){let e=m();l(7),c("ngForOf",e.allevaluacionesdata),l(5),c("ngForOf",e.allcategoriasdata),l(2),c("series",e.OpcionesGraficas.series)("chart",e.OpcionesGraficas.chart)("xaxis",e.OpcionesGraficas.xaxis)("title",e.OpcionesGraficas.title)("dataLabels",e.OpcionesGraficas.dataLabels)("plotOptions",e.OpcionesGraficas.plotOptions)("legend",e.OpcionesGraficas.legend)}}function kt(r,t){if(r&1){let e=S();a(0,"li",7)(1,"a",8),_("click",function(){let s=C(e).$implicit,d=m(2);return x(d.FiltrarXEvaluaciones2(s))}),o(2),i()()}if(r&2){let e=t.$implicit,n=m(2);l(),O("active",n.seleccionEvaluacion2.includes(e)),l(),u(" ",e," ")}}function Vt(r,t){if(r&1){let e=S();a(0,"li",7)(1,"a",8),_("click",function(){let s=C(e).$implicit,d=m(2);return x(d.FiltrarXCategorias2(s))}),o(2),i()()}if(r&2){let e=t.$implicit,n=m(2);l(),O("active",n.seleccionCategoria2.includes(e)),l(),u(" ",e," ")}}function Rt(r,t){if(r&1&&(a(0,"div")(1,"h1",16),o(2,"Estadistica General por evaluaci\xF3n"),i(),a(3,"div")(4,"h4",12),o(5,"Selecciona las Evaluaciones:"),i(),a(6,"ul",6),v(7,kt,3,3,"li",13),i()(),a(8,"div")(9,"h4",12),o(10,"Selecciona categorias:"),i(),a(11,"ul",6),v(12,Vt,3,3,"li",13),i()(),a(13,"div",17),f(14,"apx-chart",15),i()()),r&2){let e=m();l(7),c("ngForOf",e.allevaluacionesdata),l(5),c("ngForOf",e.allcategoriasdata),l(2),c("series",e.OpcionesGraficas2.series)("chart",e.OpcionesGraficas2.chart)("xaxis",e.OpcionesGraficas2.xaxis)("title",e.OpcionesGraficas2.title)("dataLabels",e.OpcionesGraficas2.dataLabels)("plotOptions",e.OpcionesGraficas2.plotOptions)("legend",e.OpcionesGraficas2.legend)}}function Nt(r,t){if(r&1){let e=S();a(0,"li",7)(1,"a",8),_("click",function(){let s=C(e).$implicit,d=m(2);return x(d.FiltrarXEvaluacionesChorizo(s))}),o(2),i()()}if(r&2){let e=t.$implicit,n=m(2);l(),O("active",n.seleccionEvaluacionChorizo.includes(e)),l(),u(" ",e," ")}}function Bt(r,t){if(r&1){let e=S();a(0,"li",7)(1,"a",8),_("click",function(){let s=C(e).$implicit,d=m(2);return x(d.FiltrarXPalabrasChorizo(s))}),o(2),i()()}if(r&2){let e=t.$implicit,n=m(2);l(),O("active",n.seleccionPalabrasChorizo.includes(e)),l(),u(" ",e," ")}}function Lt(r,t){if(r&1&&(a(0,"div"),f(1,"hr"),a(2,"h1",18),o(3,"Estadistica por \xE1reas"),i(),a(4,"div")(5,"h4",12),o(6,"Selecciona las Evaluaciones:"),i(),a(7,"ul",6),v(8,Nt,3,3,"li",13),i()(),a(9,"div")(10,"h4",12),o(11,"Selecciona palabras:"),i(),a(12,"ul",6),v(13,Bt,3,3,"li",13),i()(),a(14,"div",19),f(15,"apx-chart",20),i()()),r&2){let e=m();l(8),c("ngForOf",e.allevaluacionesdata),l(5),c("ngForOf",e.allpalabrasdata),l(2),c("series",e.OpcionesGraficasChorizo.series)("chart",e.OpcionesGraficasChorizo.chart)("xaxis",e.OpcionesGraficasChorizo.xaxis)("yaxis",e.OpcionesGraficasChorizo.yaxis)("title",e.OpcionesGraficasChorizo.title)("dataLabels",e.OpcionesGraficasChorizo.dataLabels)("plotOptions",e.OpcionesGraficasChorizo.plotOptions)("legend",e.OpcionesGraficasChorizo.legend)}}function jt(r,t){if(r&1){let e=S();a(0,"li",7)(1,"a",8),_("click",function(){let s=C(e).$implicit,d=m(2);return x(d.FiltrarXEvaluacionesChorizo2(s))}),o(2),i()()}if(r&2){let e=t.$implicit,n=m(2);l(),O("active",n.seleccionEvaluacionChorizo2.includes(e)),l(),u(" ",e," ")}}function $t(r,t){if(r&1){let e=S();a(0,"li",7)(1,"a",8),_("click",function(){let s=C(e).$implicit,d=m(2);return x(d.FiltrarXPalabrasChorizo2(s))}),o(2),i()()}if(r&2){let e=t.$implicit,n=m(2);l(),O("active",n.seleccionPalabrasChorizo2.includes(e)),l(),u(" ",e," ")}}function Ht(r,t){if(r&1&&(a(0,"div"),f(1,"hr"),a(2,"h1",21),o(3,"Estadistica de \xE1reas por\xA0evaluaci\xF3n"),i(),a(4,"div")(5,"h4",12),o(6,"Selecciona las Evaluaciones:"),i(),a(7,"ul",6),v(8,jt,3,3,"li",13),i()(),a(9,"div")(10,"h4",12),o(11,"Selecciona palabras:"),i(),a(12,"ul",6),v(13,$t,3,3,"li",13),i()(),a(14,"div",22),f(15,"apx-chart",20),i()()),r&2){let e=m();l(8),c("ngForOf",e.allevaluacionesdata),l(5),c("ngForOf",e.allpalabrasdata),l(2),c("series",e.OpcionesGraficasChorizo2.series)("chart",e.OpcionesGraficasChorizo2.chart)("xaxis",e.OpcionesGraficasChorizo2.xaxis)("yaxis",e.OpcionesGraficasChorizo2.yaxis)("title",e.OpcionesGraficasChorizo2.title)("dataLabels",e.OpcionesGraficasChorizo2.dataLabels)("plotOptions",e.OpcionesGraficasChorizo2.plotOptions)("legend",e.OpcionesGraficasChorizo2.legend)}}var k=class k{constructor(t){this._demucas=t;this.infoRecolectada=[];this.infoRecolectada2=[];this.nombrecliente="";this.fechaadmisioncliente="";this.estadisticaGeneralCategorias=!0;this.estadisticaGeneralEvaluacion=!0;this.estadisticaPorAreas=!0;this.estadisticaAreasEvaluacion=!0;this.allcategoriasdata=[];this.allevaluacionesdata=[];this.allpalabrasdata=[];this.seleccionCategoria=[];this.seleccionEvaluacion=[];this.seleccionCategoria2=[];this.seleccionEvaluacion2=[];this.seleccionCategoriaChorizo=[];this.seleccionEvaluacionChorizo=[];this.seleccionPalabrasChorizo=[];this.seleccionCategoriaChorizo2=[];this.seleccionEvaluacionChorizo2=[];this.seleccionPalabrasChorizo2=[];this.DetalleGrafica1={};this.OpcionesGraficas={};this.DetalleGrafica2={};this.OpcionesGraficas2={};this.DetalleGraficaChorizo={};this.OpcionesGraficasChorizo={};this.DetalleGraficaChorizo2={};this.OpcionesGraficasChorizo2={};this.chartOptions={};this.allcategorias=["PRIMERA EVALUACI\xD3N","SEGUNDA EVALUACI\xD3N","TERCERA EVALUACI\xD3N","CUARTA EVALUACI\xD3N","QUINTA EVALUACI\xD3N","SEXTA EVALUACI\xD3N","S\xC9PTIMA EVALUACI\xD3N","OCTAVA EVALUACI\xD3N"];this.selectedMonths=[...this.allcategorias];this.allProducts=["Producto A","Producto B","Producto C"];this.selectedProducts=[...this.allProducts];this.productData={"Producto A":[44,55,41,67,22,43,21,49,13,10,20,30,40,50,60,70,80,90,100,110],"Producto B":[13,23,20,8,13,27,33,12,25,23,12,14,15,16,17,18,19,20,21,22],"Producto C":[11,17,15,15,21,14,15,13,17,18,19,20,21,22,23,24,25,26,27,28]}}ngOnInit(){var t=Number(sessionStorage.getItem("idDemucas"));this.nombrecliente=sessionStorage.getItem("Nombre"),this.fechaadmisioncliente=sessionStorage.getItem("FechaAdmision"),this._demucas.SeleccionarAllInformacionDemucas(t).subscribe(e=>{this.infoRecolectada=e.data,this.infoRecolectada2=e.data,console.log(this.infoRecolectada),console.table(this.infoRecolectada),this.preparandoInformacion(),this.GeneracionGrafica(),this.GeneracionGrafica2(),this.GeneracionGraficaChorizo(),this.GeneracionGraficaChorizo2()},e=>{console.log("ERROR AL CARGAR Demucas",e)})}preparandoInformacion(){let t=[...new Set(this.infoRecolectada.map(s=>s.categoria))],e=[...new Set(this.infoRecolectada.map(s=>s.evaluacion))],n=[...new Set(this.infoRecolectada.map(s=>s.palabra))];this.allcategoriasdata=t,this.allevaluacionesdata=e,this.allpalabrasdata=n,console.log(t),console.log(e),this.seleccionCategoria=[...this.allcategoriasdata],this.seleccionEvaluacion=[...this.allevaluacionesdata],this.seleccionCategoria2=[...this.allcategoriasdata],this.seleccionEvaluacion2=[...this.allevaluacionesdata],this.seleccionCategoriaChorizo=[...this.allcategoriasdata],this.seleccionEvaluacionChorizo=[...this.allevaluacionesdata],this.seleccionPalabrasChorizo=[...this.allpalabrasdata],this.seleccionCategoriaChorizo2=[...this.allcategoriasdata],this.seleccionEvaluacionChorizo2=[...this.allevaluacionesdata],this.seleccionPalabrasChorizo2=[...this.allpalabrasdata]}prepararCategoriaData(){this.DetalleGrafica1={};let t={NADA:0,POCO:1,MUCHO:2};this.seleccionCategoria.forEach(e=>{let n=this.infoRecolectada.filter(d=>d.categoria===e),s=[];this.seleccionEvaluacion.forEach(d=>{let h=n.filter(b=>b.evaluacion===d),p=0,g=0;h.forEach(b=>{let G=b.multiplicar?b.multiplicar:1,ie=2*G;if(!(b.escala==null||t[b.escala]==null)){p+=ie;let ae=t[b.escala]*G;g+=ae}});let I=0;p>0&&(I=Math.round(g/p*100)),s.push(I)}),this.DetalleGrafica1[e]=s}),console.log(this.DetalleGrafica1)}GeneracionGrafica(){if(this.prepararCategoriaData(),this.seleccionCategoria.length===0||this.seleccionEvaluacion.length===0){console.error("No hay categor\xEDas o evaluaciones seleccionadas.");return}if(Object.keys(this.DetalleGrafica1).length===0){console.error("DetalleGrafica1 est\xE1 vac\xEDo o no est\xE1 correctamente formado.");return}let t=this.seleccionCategoria.map(p=>({name:p,data:this.seleccionEvaluacion.map((g,I)=>this.DetalleGrafica1[p][I]||0)}));console.log("valor",t);let e=30,n=10,s=500,h=this.seleccionCategoria.length*this.seleccionEvaluacion.length*(e+n)+100;this.OpcionesGraficas={series:t,chart:{type:"bar",height:s,width:h,stacked:!1,toolbar:{show:!0},zoom:{enabled:!0}},title:{text:"Estadistica General por categor\xEDas"},xaxis:{categories:this.seleccionEvaluacion,labels:{formatter:p=>p.split(" ").join(`
`),style:{}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#000"]},formatter:p=>`${p}%`},plotOptions:{bar:{horizontal:!1,columnWidth:e+"px",endingShape:"rounded",dataLabels:{position:"top"}}},legend:{position:"top",onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}}}}FiltrarXEvaluaciones(t){this.seleccionEvaluacion.includes(t)?this.seleccionEvaluacion=this.seleccionEvaluacion.filter(e=>e!==t):this.seleccionEvaluacion.push(t),console.log(this.seleccionEvaluacion),this.seleccionEvaluacion.sort((e,n)=>this.allevaluacionesdata.indexOf(e)-this.allevaluacionesdata.indexOf(n)),this.GeneracionGrafica()}FiltrarXCategorias(t){this.seleccionCategoria.includes(t)?this.seleccionCategoria=this.seleccionCategoria.filter(e=>e!==t):this.seleccionCategoria.push(t),this.seleccionCategoria.sort((e,n)=>this.allcategoriasdata.indexOf(e)-this.allcategoriasdata.indexOf(n)),this.GeneracionGrafica()}prepararCategoriaData2(){this.DetalleGrafica2={};let t={NADA:0,POCO:1,MUCHO:2};this.seleccionCategoria2.forEach(e=>{let n=this.infoRecolectada2.filter(d=>d.categoria===e),s=[];this.seleccionEvaluacion2.forEach(d=>{let h=n.filter(b=>b.evaluacion===d),p=0,g=0;h.forEach(b=>{let G=b.multiplicar?b.multiplicar:1,ie=2*G;if(!(b.escala==null||t[b.escala]==null)){p+=ie;let ae=t[b.escala]*G;g+=ae}});let I=0;p>0&&(I=Math.round(g/p*100)),s.push(I)}),this.DetalleGrafica2[e]=s})}GeneracionGrafica2(){if(this.prepararCategoriaData2(),this.seleccionCategoria2.length===0||this.seleccionEvaluacion2.length===0){console.error("No hay categor\xEDas o evaluaciones seleccionadas.");return}if(Object.keys(this.DetalleGrafica2).length===0){console.error("DetalleGrafica2 est\xE1 vac\xEDo o no est\xE1 correctamente formado.");return}let t=this.seleccionEvaluacion2.map(p=>({name:p,data:this.seleccionCategoria2.map(g=>this.DetalleGrafica2[g]?.[this.seleccionEvaluacion2.indexOf(p)]||0)})),e=38,n=10,s=400,h=this.seleccionCategoria2.length*this.seleccionEvaluacion2.length*(e+n)+100;this.OpcionesGraficas2={series:t,chart:{type:"bar",height:s,width:h,stacked:!1,toolbar:{show:!0},zoom:{enabled:!0}},title:{text:"Estadistica General por evaluaci\xF3n"},xaxis:{categories:this.seleccionCategoria2,labels:{formatter:p=>p.split(" ").join(`
`),style:{fontSize:"12px"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#000"]},formatter:p=>`${p}%`},plotOptions:{bar:{horizontal:!1,columnWidth:e+"px",endingShape:"rounded",dataLabels:{position:"top"}}},legend:{position:"top",onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}}}}FiltrarXEvaluaciones2(t){this.seleccionEvaluacion2.includes(t)?this.seleccionEvaluacion2=this.seleccionEvaluacion2.filter(e=>e!==t):this.seleccionEvaluacion2.push(t),console.log(this.seleccionEvaluacion2),this.seleccionEvaluacion2.sort((e,n)=>this.allevaluacionesdata.indexOf(e)-this.allevaluacionesdata.indexOf(n)),this.GeneracionGrafica2()}FiltrarXCategorias2(t){this.seleccionCategoria2.includes(t)?this.seleccionCategoria2=this.seleccionCategoria2.filter(e=>e!==t):this.seleccionCategoria2.push(t),this.seleccionCategoria2.sort((e,n)=>this.allcategoriasdata.indexOf(e)-this.allcategoriasdata.indexOf(n)),this.GeneracionGrafica2()}prepararCategoriaDataChorizo(){this.DetalleGraficaChorizo={};let t={NADA:0,POCO:1,MUCHO:2};this.seleccionEvaluacionChorizo.forEach(e=>{let n=this.infoRecolectada.filter(d=>d.evaluacion===e),s=[];this.seleccionPalabrasChorizo.forEach(d=>{let h=n.filter(g=>g.palabra===d),p=0;h.forEach(g=>{let I=g.multiplicar?g.multiplicar:1;if(!(g.escala==null||t[g.escala]==null)){let G=t[g.escala]*I;p+=G}}),s.push(p)}),this.DetalleGraficaChorizo[e]=s}),console.table(this.DetalleGraficaChorizo)}GeneracionGraficaChorizo(){if(this.prepararCategoriaDataChorizo(),this.seleccionEvaluacionChorizo.length===0){console.error("No hay evaluaciones seleccionadas.");return}if(Object.keys(this.DetalleGraficaChorizo).length===0){console.error("DetalleGraficaChorizo est\xE1 vac\xEDo o no est\xE1 correctamente formado.");return}let t=this.seleccionEvaluacionChorizo.map(p=>({name:p,data:this.DetalleGraficaChorizo[p]||[]})),e=30,n=10,s=400,h=this.seleccionPalabrasChorizo.length*this.seleccionEvaluacionChorizo.length*(e+n)+100;this.OpcionesGraficasChorizo={series:t,chart:{type:"bar",height:h,stacked:!1,toolbar:{show:!0},zoom:{enabled:!0}},title:{text:"Estadistica por \xE1reas"},plotOptions:{bar:{horizontal:!0,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetX:10,style:{fontSize:"12px",colors:["#000"]}},stroke:{show:!0,width:1,colors:["#fff"]},tooltip:{shared:!0,intersect:!1},xaxis:{categories:this.seleccionPalabrasChorizo,labels:{formatter:p=>p.length>10?p.substring(0,10)+"...":p,style:{fontSize:"12px"}}},legend:{position:"top",onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}}}}FiltrarXEvaluacionesChorizo(t){this.seleccionEvaluacionChorizo.includes(t)?this.seleccionEvaluacionChorizo=this.seleccionEvaluacionChorizo.filter(e=>e!==t):this.seleccionEvaluacionChorizo.push(t),console.log(this.seleccionEvaluacionChorizo),this.seleccionEvaluacionChorizo.sort((e,n)=>this.allevaluacionesdata.indexOf(e)-this.allevaluacionesdata.indexOf(n)),this.GeneracionGraficaChorizo()}FiltrarXPalabrasChorizo(t){this.seleccionPalabrasChorizo.includes(t)?this.seleccionPalabrasChorizo=this.seleccionPalabrasChorizo.filter(e=>e!==t):this.seleccionPalabrasChorizo.push(t),this.seleccionPalabrasChorizo.sort((e,n)=>this.allpalabrasdata.indexOf(e)-this.allpalabrasdata.indexOf(n)),this.GeneracionGraficaChorizo()}prepararCategoriaDataChorizo2(){this.DetalleGraficaChorizo2={};let t={NADA:0,POCO:1,MUCHO:2};this.seleccionEvaluacionChorizo2.forEach(e=>{let n=this.infoRecolectada.filter(d=>d.evaluacion===e),s=[];this.seleccionPalabrasChorizo2.forEach(d=>{let h=n.filter(g=>g.palabra===d),p=0;h.forEach(g=>{let I=g.multiplicar?g.multiplicar:1;if(!(g.escala==null||t[g.escala]==null)){let G=t[g.escala]*I;p+=G}}),s.push(p)}),this.DetalleGraficaChorizo2[e]=s}),console.table(this.DetalleGraficaChorizo2)}GeneracionGraficaChorizo2(){if(this.prepararCategoriaDataChorizo2(),this.seleccionEvaluacionChorizo2.length===0){console.error("No hay evaluaciones seleccionadas.");return}if(Object.keys(this.DetalleGraficaChorizo2).length===0){console.error("DetalleGraficaChorizo2 est\xE1 vac\xEDo o no est\xE1 correctamente formado.");return}let t=this.seleccionPalabrasChorizo2.map(p=>({name:p,data:this.seleccionEvaluacionChorizo2.map(g=>{let I=this.seleccionPalabrasChorizo2.indexOf(p);return this.DetalleGraficaChorizo2[g][I]||0})})),e=30,n=10,s=400,h=this.seleccionPalabrasChorizo2.length*this.seleccionEvaluacionChorizo2.length*(e+n)+100;this.OpcionesGraficasChorizo2={series:t,chart:{type:"bar",height:h,stacked:!1,toolbar:{show:!0},zoom:{enabled:!0}},title:{text:"Estadistica de \xE1reas por evaluaci\xF3n"},plotOptions:{bar:{horizontal:!0,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetX:10,style:{fontSize:"12px",colors:["#000"]}},stroke:{show:!0,width:1,colors:["#fff"]},tooltip:{shared:!0,intersect:!1},xaxis:{categories:this.seleccionEvaluacionChorizo2,labels:{formatter:p=>p.length>10?p.substring(0,10)+"...":p,style:{fontSize:"12px"}}},legend:{position:"top",onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}}}}FiltrarXEvaluacionesChorizo2(t){this.seleccionEvaluacionChorizo2.includes(t)?this.seleccionEvaluacionChorizo2=this.seleccionEvaluacionChorizo2.filter(e=>e!==t):this.seleccionEvaluacionChorizo2.push(t),console.log(this.seleccionEvaluacionChorizo2),this.seleccionEvaluacionChorizo2.sort((e,n)=>this.allevaluacionesdata.indexOf(e)-this.allevaluacionesdata.indexOf(n)),this.GeneracionGraficaChorizo2()}FiltrarXPalabrasChorizo2(t){this.seleccionPalabrasChorizo2.includes(t)?this.seleccionPalabrasChorizo2=this.seleccionPalabrasChorizo2.filter(e=>e!==t):this.seleccionPalabrasChorizo2.push(t),this.seleccionPalabrasChorizo2.sort((e,n)=>this.allpalabrasdata.indexOf(e)-this.allpalabrasdata.indexOf(n)),this.GeneracionGraficaChorizo2()}cargarbarras(){let t=this.selectedProducts.map(p=>({name:p,data:this.selectedMonths.map(g=>{let I=this.allcategorias.indexOf(g);return this.productData[p][I]})})),e=30,n=10,s=400,h=this.selectedProducts.length*this.selectedMonths.length*(e+n)+100;this.chartOptions={series:t,chart:{type:"bar",height:s,width:h,stacked:!1,toolbar:{show:!0},zoom:{enabled:!0}},title:{text:"Ventas Mensuales por Producto"},xaxis:{categories:this.selectedMonths,labels:{formatter:p=>p.split(" ").join(`
`),style:{fontSize:"12px"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#000"]}},plotOptions:{bar:{horizontal:!1,columnWidth:e+"px",endingShape:"rounded",dataLabels:{position:"top"}}},legend:{position:"top"}}}toggleMonth(t){this.selectedMonths.includes(t)?this.selectedMonths=this.selectedMonths.filter(e=>e!==t):this.selectedMonths.push(t),this.selectedMonths.sort((e,n)=>this.allcategorias.indexOf(e)-this.allcategorias.indexOf(n)),this.cargarbarras()}toggleProduct(t){this.selectedProducts.includes(t)?this.selectedProducts=this.selectedProducts.filter(e=>e!==t):this.selectedProducts.push(t),this.selectedProducts.sort((e,n)=>this.allProducts.indexOf(e)-this.allProducts.indexOf(n)),this.cargarbarras()}};k.\u0275fac=function(e){return new(e||k)(w(Y))},k.\u0275cmp=N({type:k,selectors:[["app-graficas"]],standalone:!1,decls:29,vars:16,consts:[[1,"mt-4","fondoBajo"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","text-danger"],[1,"lead","text-primary"],[1,"row","justify-content-center"],[1,"nav","nav-tabs","mb-3"],[1,"nav-item"],["href","javascript:void(0)",1,"nav-link",3,"click"],[1,"fondoBajo"],[4,"ngIf"],["id","generalXcategoria",1,"text-center","text-danger"],[1,"text-primary"],["class","nav-item",4,"ngFor","ngForOf"],["id","chart",2,"width","100%","overflow-x","auto"],[3,"series","chart","xaxis","title","dataLabels","plotOptions","legend"],["id","generalXevaluacion",1,"text-center","text-danger"],["id","chart2",2,"width","100%","overflow-x","auto"],["id","Xareas",1,"text-center","text-danger"],["id","chart3",2,"width","100%","overflow-x","auto"],[3,"series","chart","xaxis","yaxis","title","dataLabels","plotOptions","legend"],["id","areasXevaluacion",1,"text-center","text-danger"],["id","chart4",2,"width","100%","overflow-x","auto"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"GR\xC1FICAS DE LOS DEMUCAS "),i(),a(5,"p",4),o(6),E(7,"dateFormat"),i()()(),f(8,"hr"),a(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8),_("click",function(){return n.estadisticaGeneralCategorias=!n.estadisticaGeneralCategorias}),o(13," Ir a Estadistica General por categor\xEDas "),i()(),a(14,"li",7)(15,"a",8),_("click",function(){return n.estadisticaGeneralEvaluacion=!n.estadisticaGeneralEvaluacion}),o(16," Ir a Estadistica General por evaluaci\xF3n "),i()(),a(17,"li",7)(18,"a",8),_("click",function(){return n.estadisticaPorAreas=!n.estadisticaPorAreas}),o(19," Ir a Estadistica por \xE1reas "),i()(),a(20,"li",7)(21,"a",8),_("click",function(){return n.estadisticaAreasEvaluacion=!n.estadisticaAreasEvaluacion}),o(22," Ir a Estadistica de \xE1reas por evaluaci\xF3n "),i()()()()(),a(23,"div",9),v(24,Mt,15,9,"div",10),f(25,"hr"),v(26,Rt,15,9,"div",10)(27,Lt,16,10,"div",10)(28,Ht,16,10,"div",10),i()),e&2&&(l(6),z("Visualizando Gr\xE1ficas Demucas del Cliente: ",n.nombrecliente," de la Admisi\xF3n: ",A(7,14,n.fechaadmisioncliente)),l(6),O("active",n.estadisticaGeneralCategorias),l(3),O("active",n.estadisticaGeneralEvaluacion),l(3),O("active",n.estadisticaPorAreas),l(3),O("active",n.estadisticaAreasEvaluacion),l(3),c("ngIf",n.estadisticaGeneralCategorias),l(2),c("ngIf",n.estadisticaGeneralEvaluacion),l(),c("ngIf",n.estadisticaPorAreas),l(),c("ngIf",n.estadisticaAreasEvaluacion))},dependencies:[X,W,Re,Q],encapsulation:2});var K=k;var D=class D{constructor(t,e,n){this.router=t;this.http=e;this._tool=n;this.ruta=Ee.ruta}canActivate(t,e){let n=localStorage.getItem("token");return n?this.http.post(this.ruta+"api/verify-token",{token:n}).pipe(se(s=>(console.log(s),s&&s.name?!0:(this._tool.MensajeInformacionAccesoNoPermitidoGuard(),!1))),ce(s=>(this._tool.MensajeInformacionAccesoNoPermitidoGuard(),le(!1)))):(this._tool.MensajeInformacionAccesoNoPermitidoGuard(),!1)}};D.\u0275fac=function(e){return new(e||D)(R(q),R(xe),R(De))},D.\u0275prov=de({token:D,factory:D.\u0275fac,providedIn:"root"});var ee=D;var Ut=[{path:"perfil",component:Z,canActivate:[ee]},{path:"graficas",component:K}],T=class T{};T.\u0275fac=function(e){return new(e||T)},T.\u0275mod=B({type:T}),T.\u0275inj=V({imports:[re.forChild(Ut),re]});var te=T;var F=class F{};F.\u0275fac=function(e){return new(e||F)},F.\u0275mod=B({type:F}),F.\u0275inj=V({imports:[Ce,ze,Ae,te,Ne,be,Ve,ke]});var Be=F;export{Be as PrivadosModule};
